{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"index.html","title":"Procedure for Investigating Chemical Mechanisms with ORCA","text":""},{"location":"index.html#under-maintanance","title":"UNDER MAINTANANCE","text":"<p>This page describes the procedure for investigating mechanistic steps for mechanisms in chemistry using ORCA.</p> <ul> <li><p> Goal: To find the transition state of a mechanistic step. </p></li> </ul>"},{"location":"index.html#background","title":"Background","text":"<p>We are wanting to find the transition state for a single mechanistic step. Visually, we are trying to find a 1<sup>st</sup> order saddlepoint to get from the reactant to the product on the potential energy surface (See image below). In this procedure/tutorial, we will look at how to obtain the transition state using ORCA.</p> Mechanistic Step Example (Image adapted from J. A. Keith, V. Vassilev-Galindo, B. Cheng, S. Chmiela, M. Gastegger, K.-R. M\u00fcller, and A. Tkatchenko; Chem. Rev. 2021, 121, 16, 9816\u20139872). <p>Note</p> <p>The x and y axis given as R<sub>1</sub> and R<sub>2</sub> in the image above just indicate there is a change in spatial coordinates of the atoms in your molecule going from the reactant to the product. </p>"},{"location":"index.html#general-steps","title":"General Steps","text":"<p>The general steps that we will follow in this procedure are:</p> <ol> <li>Locally optimise the reactants and products to their ground state.</li> <li>Obtain the transition state by using either the SCAN or NEB method.</li> <li>Optimise the transition state.</li> <li>Validate the transition state using the IRC method. </li> <li>Perform some final checks, and then obtain the structures and energies of your reactants, products, and transition state for presentation. </li> </ol> <p>Repeat steps 2-4 until you find the transition state for your mechanism. Sometimes it requires a bit of playing around. </p> <p>IMPORTANT</p> <p>Before you begin, make sure you have read the What You Need to Consider Before Beginning section. This section gives what decisions and considerations you need to make before performing this procedure on your reaction mechanisms. </p>"},{"location":"index.html#orca","title":"ORCA","text":"<p>I have written this procedure for: </p> <ul> <li>ORCA 6.1.0 and 6.0.0</li> <li>ORCA 5.0.4 and 5.0.3</li> </ul> <p>This method should be valid for future versions of ORCA, but just in case any problems occur it may be due to ORCA version issues. </p>"},{"location":"index.html#programs-to-install","title":"Programs to Install","text":"<p>There are several programs that you should install on your computer for running this procedure. See the Programs to Install guide to learn about what programs to install and how to install them on your computer.</p>"},{"location":"index.html#orca-templates","title":"ORCA Templates","text":"<p>This folder contains all the templates for running all ORCA jobs for this procedure. </p> <p>IMPORTANT</p> <p>You should download these templates from here and customise them for your needs.</p> <p>Make sure that you change the ORCA settings in the <code>.inp</code> files for your specifications, such as the functional, basis set, solvent model, etc. See the Before You Begin section for more information about the various ORCA settings for the <code>.inp</code> file.</p>"},{"location":"index.html#examples","title":"Examples","text":"<p>You can find examples of completed ORCA jobs for each step in this procedure here. These files will be referenced in this repository as examples of what you expect to see as you work this procedure.</p>"},{"location":"index.html#questions-feedback-and-things-to-add","title":"Questions, Feedback, and Things to Add","text":"<p>I am very keen for feedback about how you find the information in this github page, both the process and the clarity of what I have written. If you have any questions about this process, feed free to write me a message.</p> <p>To do this, open the <code>Issues</code> Github webpage, click the <code>New issue</code> button, and write you question/give you feedback. </p> <ul> <li>Also if there are any features that you would like added to this procedure or to the <code>viewORCA</code> program, write them in the <code>Issues</code> section.</li> </ul> <p>Thanks!</p>"},{"location":"Before_You_Begin.html","title":"Before You Begin","text":"<p>We will now perform the machanistic investigation procedure in ORCA. We will </p> <ul> <li>Present the example that we will use to describe the steps to this procedure</li> <li>Indicate what settings you would include in all your <code>inp</code> files for this procedure</li> <li>Present the steps for performing the machanistic investigation procedure</li> </ul>"},{"location":"Before_You_Begin.html#mechanistic-step-example","title":"Mechanistic Step Example","text":"<p>For this tutorial, we will be using this procedure to understand the following mechanistic step. Here, we want to determine the transition state for a Cu<sup>+</sup> atom inserting itself into the alpha C-H bond in benzylamine. </p> Mechanistic Step Example."},{"location":"Before_You_Begin.html#what-you-need-to-consider-before-beginning","title":"What You Need to Consider Before Beginning","text":"<p>Before beginning, you need to decide what universal setting you want to use for your mechanisms. This includes:</p> <ul> <li>what functional you want to use, </li> <li>what basis set you want to use, </li> <li>if you want to use a solvent model, and if so what model and solvent you want to include, </li> <li>etc...</li> </ul> Example of functional, basis set, and solvent model included in the ORCA input script.<pre><code>!B3LYP DEF2-TZVP D3BJ\n%CPCM EPSILON 6.02 REFRAC 1.3723 END\n</code></pre> <p>Other options that are good to include in all your ORCA input files are:</p> Options that are good to add into your ORCA input files. You may need to change these if you have convergence issues.<pre><code>%SCF\n    MaxIter 2000       # Here setting MaxIter to a very high number. Intended for systems that require sometimes 1000 iterations before converging (very rare).\n    DIISMaxEq 5        # Default value is 5. A value of 15-40 necessary for difficult systems.\n    directresetfreq 15 # Default value is 15. A value of 1 (very expensive) is sometimes required. A value between 1 and 15 may be more cost-effective.\nEND\n%PAL NPROCS 32 END # The number of CPUs you want ORCA to use\n%maxcore 2000 # This indicates you want ORCA to use only 2GB per core maximum, so ORCA will use only 2GB*32=64GB of memory in total.\n</code></pre> <p>RECOMMENDATIONS</p> <p>With regards to the functional, basis set, solvent model, etc., it is recommended that you discuss what you are wanting to do with a computational chemist (if you are not a computational chemist) to get advice about what functional, basis set, solvent model, etc are most appropriate for your project and the questions you are wanting to answer using ORCA. </p> <ul> <li>It is important to make these choices before beginning your calculations, as you will need to keep these settings consistent across all the mechanistic steps you want to perform. </li> </ul> <p>I would personally recommend reading several computational papers that are related to the system you are looking at understanding, as well as reading the following papers to understand what functional and basis set is most appropriate for your project:</p> <ul> <li>https://onlinelibrary.wiley.com/doi/epdf/10.1002/anie.202205735 (This paper is VERY recommended to non-computational chemists and computational chemist. It is a very good guide at all the considerations you should make and best practices)</li> <li>https://pubs.rsc.org/en/content/articlelanding/2017/cp/c7cp04913g (The results section (particularly the end of the results section) provides a list of good functionals to use based on scientific validations)</li> <li>https://bpb-ap-se2.wpmucdn.com/blogs.unimelb.edu.au/dist/0/196/files/2021/05/GOERIGK_GroundStateDFT_RACI2021_handout.pdf (Slides from Larz Goerik based on the paper above)</li> <li>https://www.publish.csiro.au/CH/CH20093 (This paper give an idea of what you need to think about for excited state calculations)</li> </ul>"},{"location":"Before_You_Begin.html#the-orca-documentation-and-other-resources","title":"The ORCA Documentation and Other Resources","text":"<p>It is a good idea to have the ORCA manual on hand to figure out what keywords to give in your <code>orca.inp</code> file that you would like to use for your calculations, as well as to help toubleshoot problems that arise when you run your ORCA jobs. </p> <p>Note</p> <p>You can download the ORCA manual for the Github page by clicking here.</p> <p>There are other resources which are great to read for help and troubleshooting. Here are some of these resources:</p> <ul> <li>The ORCA Input Library: https://sites.google.com/site/orcainputlibrary</li> <li>ORCA tutorials from orcasoftware.de: https://www.faccts.de/docs/orca/6.0/tutorials/</li> </ul>"},{"location":"Investigating_Mechanisms.html","title":"How to Investigate Reaction Mechanisms using ORCA","text":"<p>It is possible to investigate reaction mechanisms using ORCA, as long as you know what the mechanisms are that you want to investigate. You can:</p> <ul> <li>Obtain the activation energies of a mechanism, </li> <li>Determine the rate determining step for a reaction mechanism, and</li> <li>Investigate multiple mechanisms for getting from a reactant to a product to determine the kinetically likely pathways.<sup>1</sup></li> </ul> <p>Note</p> <p>You need to have some idea about your mechanism before hand. ORCA can not determine pathways automatically, it can only investigate potential mechanistic pathways that you give it to investigate. </p> <ul> <li>However, the mechanisms you propose don't have to be correct. ORCA can be used to determine if mechanisms are likely or not. </li> </ul>"},{"location":"Investigating_Mechanisms.html#how-do-we-investigate-reaction-mechanisms-using-computational-chemistry","title":"How do we Investigate Reaction Mechanisms using Computational Chemistry","text":"<p>To investigate reaction mechanisms using computational chemistry, we need to make sure we have clear mechanistic pathways that we can interrogate. </p> <p>For example, consider the following overall reaction:</p> An example overall reaction. <p>There are several ways that this mechanism could proceed. Here, it is important that we give explicit details about how we believe this reaction reaction proceed. Given below is an example of some of the ways this reaction could proceed, given in a mechanistic scheme:</p> An example of reaction mechanism scheme for this overall reaction. This scheme give multiple pathways that this reaction could proceed. Only the beginning segment of the reaction mechanisms have been shown here. <p>We can use ORCA to study each mechanistic step in this mechanistic scheme. The way to do this is to give a name to each step. An example of this is shown below:</p> An example of reaction mechanism scheme for this overall reaction, where each mechanistic step has been labelled. <p>It is important to set up your folder system very clearly, as you may be running lots of calculations at the same time and will be collecting a lot of information about numerous mechanistic steps. Below is the recommended way to set up your folder system for studying this example mechanism:</p> An example of reaction mechanism scheme for this overall reaction, where each mechanistic step has been labelled. <p>For the rest of this tutorial, we will focus on understanding the kinetics of just one of these mechanistic steps. In this example, we will focus on Step C. Read the Before You Begin section to proceed with this tutorial. </p> <ol> <li> <p>You can also investigate the thermodynamically-limiting reaction mechanisms as well using ORCA. This is generally easier to do as you don't have to understand kinetics to do this, which means you dont need to run all the steps you need to do here to obtain activation energies and transition states.\u00a0\u21a9</p> </li> </ol>"},{"location":"Programs_to_Install.html","title":"Programs to Install","text":"<p>There are several programs that you should install on your computer for running this procedure. These are:</p>"},{"location":"Programs_to_Install.html#sublime-or-notepad","title":"Sublime or Notepad++","text":"<p>It is a good idea to have a notepad program for reading and editing files easily on your computer. Here are two recommendations for notepads:</p> <ul> <li>Sublime: https://www.sublimetext.com</li> <li>Notepad++: https://notepad-plus-plus.org/</li> </ul>"},{"location":"Programs_to_Install.html#python-3-and-pip3","title":"Python 3 and <code>pip3</code>","text":"<p>This tutorial is designed to work with Python 3. To find out if you have Python 3 on your computer and what version you have, type into the terminal:</p> <pre><code>python --version\n</code></pre> <p>If you have Python 3 on your computer, you will get the version of python you have on your computer. E.g:</p> <pre><code>user@computer_name path % python --version\nPython 3.11.6\n</code></pre> <p>If you have Python 3, you may have <code>pip</code> installed on your computer as well. <code>pip</code> is a python package installation tool that is recommended by Python for installing Python packages. To see if you have <code>pip</code> installed, type into the terminal:</p> <p><pre><code>pip list\n</code></pre> If you get back a list of python packages install on your computer, you have <code>pip</code> installed. E.g.</p> <pre><code>user@computer_name Documentation % pip3 list\nPackage         Version\n--------------- -----------\nase             3.26.0\ncontourpy       1.3.3\ncycler          0.12.1\net_xmlfile      2.0.0\nfcswrite        0.6.2\nfonttools       4.60.1\nkiwisolver      1.4.9\nmatplotlib      3.10.6\nnarwhals        2.7.0\nnumpy           2.3.3\nopenpyxl        3.1.5\npackaging       25.0\npandas          2.3.3\npatsy           1.0.1\npillow          11.3.0\npip             25.2\nplotly          6.3.1\npyparsing       3.2.5\npython-dateutil 2.9.0.post0\npytz            2025.2\nscipy           1.16.2\nsetuptools      80.9.0\nsix             1.17.0\nstatsmodels     0.14.5\ntqdm            4.67.1\ntzdata          2025.2\nviewORCA        0.2.2\nxlsxwriter      3.2.9\n</code></pre> <p>If you do not see this, you probably do not have <code>pip</code> installed on your computer. If this is the case, check out PIP Installation. </p> <p>Note</p> <p>In most cases, <code>pip</code> and <code>pip3</code> are synonymous for the Python Installation Package for Python 3. However in some cases, <code>pip</code> will be directed to the Python Installation Package for Python 2 rather than Python 3. To check this, run in the terminal:</p> <pre><code>pip --version\n</code></pre> <p>If the output indicates you this Python Installation Package is for Python 2 and not Python 3, only install packages using the <code>pip3</code> name. </p> <p>For the rest of this documentation, <code>pip</code> will be used, however if your computer's <code>pip</code>  refers to Python 2 and not Python 3, use <code>pip3</code>  instead of <code>pip</code>. </p>"},{"location":"Programs_to_Install.html#packaging","title":"Packaging","text":"<p>The <code>packaging</code> program is also used in this program to check the versions of ASE that you are using for compatibility issues. The easiest way to install <code>packaging</code> is though <code>pip</code>. Type the following into the terminal:</p> <pre><code>pip3 install --upgrade --user packaging\n</code></pre>"},{"location":"Programs_to_Install.html#numpy","title":"Numpy","text":"<p>The <code>numpy</code> program is used in this program to perform matrix calculations, as well as used by <code>ase</code>. The easiest way to install <code>numpy</code> is though <code>pip</code>. Type the following into the terminal:</p> <pre><code>pip3 install --upgrade --user numpy\n</code></pre>"},{"location":"Programs_to_Install.html#scipy","title":"Scipy","text":"<p>The <code>scipy</code> program is used by the <code>ase</code> program. The easiest way to install <code>scipy</code> is though <code>pip</code>. Type the following into the terminal:</p> <pre><code>pip3 install --upgrade --user scipy\n</code></pre>"},{"location":"Programs_to_Install.html#matplotlib","title":"Matplotlib","text":"<p>The <code>matplotlib</code> program is used in this program to create the energy profile plots made by the <code>viewORCA neb_snap</code> module. The easiest way to install <code>matplotlib</code> is though <code>pip</code>. Type the following into the terminal:</p> <pre><code>pip3 install --upgrade --user matplotlib\n</code></pre>"},{"location":"Programs_to_Install.html#atomic-simulation-environment-ase","title":"Atomic Simulation Environment (ASE)","text":"<p>The Atomic Simulation Environment (ASE) is used to read and write molecule data, as well as to view molecules in a GUI. Read more about ASE here. </p> <p>The installation of ASE can be found on the ASE installation page, however from experience if you are using ASE for the first time, it is best to install ASE using <code>pip</code>, the package manager that is an extension of python to keep all your program easily managed and easy to import into your python. </p> <p>To install ASE using <code>pip</code>, perform the following in your terminal.</p> <pre><code>pip3 install --user --upgrade numpy scipy matplotlib\npip3 install --user --upgrade ase\n</code></pre> <p>Installing using <code>pip</code> ensures that ASE is being installed to be used by Python 3, and not Python 2. Installing ASE like this will also install all the requisite program needed for ASE. This installation includes the use of features such as viewing the xyz files of structure and looking at ase databases through a website. These should be already assessible, which you can test by entering into the terminal:</p> <pre><code>ase gui\n</code></pre> <p>This should show a GUI with nothing in it, as shown below:</p> This is a blank ase gui screen that you would see if enter ase gui into the terminal. <p>However, in the case that this does not work, we need to manually add a path to your <code>~/.bashrc</code> so you can use the ASE features externally outside python. Do the following; first enter the following into the terminal:</p> <pre><code>pip show ase\n</code></pre> <p>This will give a bunch of information, including the location of ase on your computer. For example, when I do this I get:</p> <pre><code>user@computer_name docs % pip show ase\nName: ase\nVersion: 3.26.0\nSummary: Atomic Simulation Environment\nHome-page: https://ase-lib.org/\nAuthor: \nAuthor-email: \nLicense-Expression: LGPL-2.1-or-later\nLocation: /Users/geoffreyweal/Library/Python/3.11/lib/python/site-packages\nRequires: matplotlib, scipy, numpy\nRequired-by: \n</code></pre> <p>Copy the <code>Location</code> line. If we remove the <code>lib/python/site-packages</code> bit and replace it with <code>bin</code>, this gives us the location of useful ASE programs. The example below is for Python 3.11. </p> <pre><code>/Users/geoffreyweal/Library/Python/3.11/bin\n</code></pre> <p>Next, add this to your <code>~/.bashrc</code> file as below:</p> <pre><code>############################################################\n# For ASE\nexport PATH=/Users/geoffreyweal/Library/Python/3.11/bin:$PATH\n############################################################\n</code></pre> <p>Write <code>source ~/.bashrc</code> in the terminal and press enter. Once you have done this, try to run <code>ase gui</code> in the terminal. This will hopefully show the ase gui and allow you to access the useful ASE programs through the terminal. </p>"},{"location":"Programs_to_Install.html#vieworca","title":"viewORCA","text":"<p>The <code>viewORCA</code> program is used throughout this procedure to allow the user to view various ORCA calculations. The easiest way to install <code>viewORCA</code> is though <code>pip</code>. Type the following into the terminal:</p> <pre><code>pip3 install --upgrade --user viewORCA\n</code></pre> Note <p>If you want to install <code>viewORCA</code> via an alternative method, see the <code>viewORCA</code> Installation Instructions. </p>"},{"location":"Step_1_Locally_Optimise_Reactant_and_Product.html","title":"Step 1: Locally Optimise Reactants and Products","text":"<p>Tip</p> <p>Download the template folder for this step by clicking the button below and work on the files in the template folder as you read through this tutorial. </p> <p>Download Templates.zip </p> <p>First we need to locally optimize the reactants and products. To do this:</p> <ol> <li>Make a <code>Reactants</code> and a <code>Products</code> folder</li> <li>Create a new folder for each reactant and product in your mechanistic step. </li> <li>Add the <code>.inp</code> file to each folder for performing local optimisations. Make sure you include the following into your <code>.inp</code> files for all your reactants and products:</li> </ol> <pre><code>!OPT FREQ TightOPT TightSCF defgrid2\n</code></pre> <p>Here, we perform a geometry optimisation to optimize the system. The tags here indicate you want to do the following: </p> <ul> <li><code>OPT</code>: Indicates you want ORCA to perform a local optimisation. </li> <li><code>FREQ</code>: Indicates you want ORCA to calculation the vibrational frequency for your molecule. <ul> <li>This is used to verify that your optimised structure is indeed a local minimum. </li> <li>This will also give you the Gibbs free energy for your molecule that you (may) want to report as your energy. </li> </ul> </li> <li><code>TightOPT</code>: Tells ORCA to tighten the convergence criteria for each geometric step. See the ORCA 6.1.0 Manual, page 618 for more info.</li> <li><code>TightSCF</code>: Tells ORCA to tighten the convergence criteria for each electronic step. </li> <li><code>defgrid2</code>: Indicates how fine we want the intergration grid to be (This is the default).</li> </ul> <p>NOTE 1</p> <p>I have set the electronic optimisation steps to be tight (<code>TightSCF</code>). This is just to make sure the electronic are well converged, but it may be a bit extreme. </p> <ul> <li>If you have problems, you can try using the normal convergence criteria for the electronic steps (<code>NormalSCF</code>)</li> </ul> <p>NOTE 2</p> <p>Click here for more information about other electronic convergence and interaction grid settings (besides <code>TightSCF</code> and <code>defgrid2</code>)</p> <p>An example of the complete <code>orca.inp</code> file for a local optimisation ORCA job is given below (also located here): </p> Example orca.inp file used to geometrically optimise the product structure<pre><code>!B3LYP DEF2-TZVP D3BJ \n!OPT FREQ TightOPT TightSCF defgrid2\n%SCF\n    MaxIter 2000       # Here setting MaxIter to a very high number. Intended for systems that require sometimes 1000 iterations before converging (very rare).\n    DIISMaxEq 5        # Default value is 5. A value of 15-40 necessary for difficult systems.\n    directresetfreq 15 # Default value is 15. A value of 1 (very expensive) is sometimes required. A value between 1 and 15 may be more cost-effective.\nEND\n%CPCM EPSILON 6.02 REFRAC 1.3723 END\n%PAL NPROCS 32 END\n%maxcore 2000 # This indicates you want ORCA to use only 2GB per core maximum, so ORCA will use only 2GB*32=64GB of memory in total.\n* xyzfile 1 1 product.xyz \n</code></pre> <p>NOTE 3</p> <p>Make sure you include a newline or two at the end of your <code>orca.inp</code> file, otherwise ORCA will get confused and not run.</p> <p>The last line of the ORCA <code>inp</code> file contains the following: </p> <ol> <li>The input type for inputting the coordinates of your system.</li> <li>The overall charge of your system.</li> <li>The overall multiplcity of your system.</li> <li>If you use the <code>xyzfile</code> type, the xyz file of your system. </li> </ol> <p>Here, <code>xyzfile</code> allows you to import an xyz file into ORCA. You can add the xyz data directly in the <code>.inp</code> file, but I find having a separate <code>xyz</code> file is better because this allow you to look at the xyz file in a GUI like in atomic simulation environment (ASE). </p> <ul> <li>Include the <code>xyz</code> files of your reactant and product molecules in the <code>Reactant</code> and <code>Product</code> folders, respectively. </li> <li>If your reactants or products contain more than one molecule/chemical system, split them up and optimise them individually in their own individual folders. </li> </ul> What is the multiplicity of my system? <p>The multiplicity indicates what the total spin of the electrons in your system (reactants or products) is. This is based on the number of electrons are in your system, where the multiplicity is based on the \\(M = 2S + 1\\) rule (and where \\(S\\) is the total spin of your electrons): </p> <ul> <li>If you have an even number of electrons in your system, the multiplicity will be an odd number. The lowest value multiplicity is 1.</li> <li>If you have an odd  number of electrons in your system, the multiplicity will be an even number. The lowest value multiplicity is 2 (It can not be 0).</li> </ul> <p>If you want to easily figure out if you should have an even or odd multiplicity, you can use:</p> <pre><code>viewORCA multi filepath --charge=charge\n</code></pre> <p>where </p> <ul> <li><code>filepath</code> is the path to the <code>xyz</code> file of your system, and </li> <li><code>--charge</code> is the overall charge of your system (if <code>--charge</code> is not given, the default given is 0). </li> </ul> <p>See more about <code>viewORCA multi</code> by clicking here for the <code>multi</code> entry in the <code>viewORCA</code> manual. </p> <p>Note: Your multiplicity may be dependent on if you have transition metals in your system. For example, 3d transition metals can have valence electrons in degenerate energy levels. </p> <p>Examples: Based on crystal field theory, octahedral transition metal complexes have 3 lower energy t<sub>2g</sub> orbitals, and 2 higher energy e<sub>g</sub> orbitals. Thinking about this orbital scheme, consider the following examples:</p> <ul> <li> <p>Example 1: Octahedral Cu(I) has 10 valence electrons in the 3d orbitals. 6 of these electrons live in the t<sub>2g</sub>, while the other 4 electrons live in the e<sub>g</sub> orbitals. Therefore, the total electron spin is \\(0\\), giving a multiplicity of \\(M = 2(0) + 1 = 1\\).</p> </li> <li> <p>Example 2: Octahedral Cu(II) complexes have 9 valence electrons. 6 of these electrons live in the t<sub>2g</sub>, while the other 3 electrons live in the e<sub>g</sub> orbitals. Therefore, the total electron spin is \\(1/2\\), giving a multiplicity of \\(M = 2(1/2) + 1 = 2\\).</p> </li> <li> <p>Example 3: Octahedral Fe(III) complexes have 5 valence electrons. In the high spin case, 3 of these electrons these live individually in each of the 3 t<sub>2g</sub>, while the other 2 electrons live in the 2 e<sub>g</sub> orbitals. Therefore, the total electron spin is \\(5/2\\), giving a multiplicity of \\(M = 2(5/2) + 1 = 6\\).</p> </li> </ul> <p> 3d orbtials of octahedral Cu(I) (left), Cu(II) (middle) and Fe(III) (right) based on crystal field theory. </p> <p>Submit the job to slurm (if you use slurm) using the <code>submit.sl</code> file:</p> Example of a submit.sl file for submitting ORCA jobs to slurm<pre><code>#!/bin/bash -e\n#SBATCH --job-name=A3_Step1_Products\n#SBATCH --ntasks=32\n#SBATCH --mem-per-cpu=2500MB\n#SBATCH --partition=genoa,milan\n#SBATCH --time=3-00:00     # Walltime\n#SBATCH --output=slurm-%j.out      # %x and %j are replaced by job name and ID\n#SBATCH --error=slurm-%j.err\n#SBATCH --nodes=1 # OpenMPI can have problems with ORCA over multiple nodes sometimes, depending on your system.\n\n# Load ORCA\nmodule load ORCA/6.1.0-f.0-OpenMPI-4.1.5\n\n# ORCA under MPI requires that it be called via its full absolute path\norca_exe=$(which orca)\n\n# Don't use \"srun\" as ORCA does that itself when launching its MPI process.\n${orca_exe} orca.inp &gt; output.out\n</code></pre> <p>NOTE 4</p> <p>While ORCA has been told to use <code>maxcore</code> = 2000 (MB) * 32 = 64 GB in the <code>.inp</code> file, we have told slurm to reserve <code>2500MB</code> * 32 = 80 GB of memory. It is a good idea to give your ORCA job a bit of extra memory in slurm just in case ORCA accidentally goes over it's allocated RAM. Here, I have abitrarily given this job 500 MB more RAM per CPU just in case. </p>"},{"location":"Step_1_Locally_Optimise_Reactant_and_Product.html#outputs-from-orca-for-example","title":"Outputs from ORCA for Example","text":"<p>While ORCA is running, it will output several files, including an <code>output.out</code> file, an <code>orca.xyz</code> file, and an <code>orca_trj.xyz</code> file.</p> <ul> <li><code>output.out</code>: This file contains the details about how ORCA ran. This includes the vibrational frequency data to check if the locally optimised structure is in fact a local minimum.</li> <li><code>orca.xyz</code>: This is the locally optimised molecule. </li> <li><code>orca_trj.xyz</code>: This file shows how ORCA locally optimised the molecule. Type <code>viewORCA opt</code> into the terminal to view how the molecule was optimised, including an energy profile. </li> </ul> <p>Once ORCA has finished, you should do the following checks:</p>"},{"location":"Step_1_Locally_Optimise_Reactant_and_Product.html#check-1-look-at-your-molecule-and-the-energy-profile-and-make-sure-it-looks-ok","title":"Check 1: Look at your molecule and the energy profile and make sure it looks ok","text":"<p>The first thing to do is to look at your molecule and check if it looks sensible with your chemical intuition. You can do this by opening up the <code>orca.xyz</code> in your favourite GUI. I like to use atomic simulation environment (ASE). To look at the molecule and its energy profile:</p> <ol> <li>Open a new terminal</li> <li><code>cd</code> into the optimisation folder</li> <li>Type <code>viewORCA opt</code> into the terminal</li> </ol> <pre><code># cd into your optimisation folder\ncd ORCA_Mechanism_Procedure/Example/Step1_Geo_Opt/Products\n\n# View the optimisation \nviewORCA opt\n</code></pre> <p>NOTE 1</p> <p>If <code>viewORCA opt</code> does not work, type <code>ase gui orca_trj.xyz</code> into the terminal instead of <code>viewORCA opt</code>. </p> <p>NOTE 2</p> <p><code>viewORCA opt</code> will also create a xyz file called <code>OPT_images.xyz</code> that you can copy and view on your own computer. </p> <ul> <li>If you just want to create the <code>OPT_images.xyz</code> file and not view the optimisation, type into the terminal <code>viewORCA opt --view False</code> (which will create the <code>OPT_images.xyz</code> file). </li> </ul> <p>Here, you want to check that the molecule looks ok from your chemical and physical intuition. Here is an example of what the optimised molecule looks like (the <code>orca.xyz</code> file here). If we look at the initial molecule geometry (by typing <code>viewORCA opt</code> or <code>ase gui product.xyz</code> into the terminal), we can see how the molecule has changed after being geometrically optimised: </p> Image of optimisation process by ORCA. <p><code>viewORCA opt</code> will also show you the energy profile for this optimisation. </p> Energy profile of optimisation process by ORCA."},{"location":"Step_1_Locally_Optimise_Reactant_and_Product.html#check-2-did-the-geometry-optimisation-converge-successfully","title":"Check 2: Did the geometry optimisation converge successfully","text":"<p>You want to look for a table in the <code>output.out</code> file for a table with the title <code>Geometry convergence</code>. There will be many of these tables, as one is given for each geometric step performed. </p> <ul> <li>You want to look at the last <code>Geometry convergence</code> table in the output file as this will display the information for the latest geometrically optimised step. An example for the <code>Products</code> is given below:</li> </ul> Extract of geometry convergence information from the ORCA output file<pre><code>                                .--------------------.\n          ----------------------|Geometry convergence|-------------------------\n          Item                value                   Tolerance       Converged\n          ---------------------------------------------------------------------\n          Energy change      -0.0000121554            0.0000010000      NO\n          RMS gradient        0.0000126838            0.0000300000      YES\n          MAX gradient        0.0000468077            0.0001000000      YES\n          RMS step            0.0001259501            0.0006000000      YES\n          MAX step            0.0005455187            0.0010000000      YES\n          -------------------------------------------------------------------------\n          ........................................................\n          Max(Bonds)      0.0000      Max(Angles)    0.01\n          Max(Dihed)        0.03      Max(Improp)    0.00\n          ---------------------------------------------------------------------\n\n       Everything but the energy has converged. However, the energy\n       appears to be close enough to convergence to make sure that the\n       final evaluation at the new geometry represents the equilibrium energy.\n       Convergence will therefore be signaled now\n\n\n                    ***********************HURRAY********************\n                    ***        THE OPTIMIZATION HAS CONVERGED     ***\n                    *************************************************\n</code></pre> <p>In this example, you can see that the majority of the items of interest have converged, and ORCA has happy that the convergence criteria have been met. ORCA also tells you this by giving you a <code>HURRAY</code> message as well as a <code>THE OPTIMIZATION HAS CONVERGED</code> message (as you can see in above). </p>"},{"location":"Step_1_Locally_Optimise_Reactant_and_Product.html#check-3-does-the-molecule-have-any-non-negative-vibrational-frequencies","title":"Check 3: Does the molecule have any non-negative vibrational frequencies","text":"<p>After performing a local optimisation, it is important that you look at the vibrational frequencies that are calculated. These are the frequencies that you could see in an IR or Raman spectra. You want to look through your ORCA <code>output.out</code> file for a heading called <code>VIBRATIONAL FREQUENCIES</code>. We want to make sure that all the frequencies are non-negative. This means we are in a local energy well. </p> <ul> <li>If one or more frequency is negative, this means we are not in a local minimum. In this case, you need to tighten the optimisation, or need to look at your molecule and see if any part of it structurally does not make sense with your chemical intuition. </li> </ul> <p>In the example below (for <code>Products</code>), you can see that there are no non-negative frequencies from the <code>FREQ</code> calculation, therefore we are in a local energy well: </p> Extract of vibrational frequency information from the ORCA output file<pre><code>-----------------------\nVIBRATIONAL FREQUENCIES\n-----------------------\n\nScaling factor for frequencies =  1.000000000  (already applied!)\n\n     0:       0.00 cm**-1\n     1:       0.00 cm**-1\n     2:       0.00 cm**-1\n     3:       0.00 cm**-1\n     4:       0.00 cm**-1\n     5:       0.00 cm**-1\n     6:      44.93 cm**-1\n     7:      69.32 cm**-1\n     8:     145.14 cm**-1\n     9:     225.50 cm**-1\n    10:     280.47 cm**-1\n    11:     304.99 cm**-1\n    12:     391.81 cm**-1\n    13:     402.73 cm**-1\n    14:     415.60 cm**-1\n    15:     472.47 cm**-1\n    16:     496.43 cm**-1\n    17:     584.01 cm**-1\n    18:     628.47 cm**-1\n    19:     679.74 cm**-1\n    20:     722.32 cm**-1\n    21:     784.15 cm**-1\n    22:     793.27 cm**-1\n    23:     809.82 cm**-1\n    24:     845.31 cm**-1\n    25:     953.98 cm**-1\n    26:     980.92 cm**-1\n    27:     997.22 cm**-1\n    28:    1018.49 cm**-1\n    29:    1030.84 cm**-1\n    30:    1046.46 cm**-1\n    31:    1103.59 cm**-1\n    32:    1137.99 cm**-1\n    33:    1187.92 cm**-1\n    34:    1210.32 cm**-1\n    35:    1238.50 cm**-1\n    36:    1312.26 cm**-1\n    37:    1358.75 cm**-1\n    38:    1377.48 cm**-1\n    39:    1481.29 cm**-1\n    40:    1515.76 cm**-1\n    41:    1542.98 cm**-1\n    42:    1608.70 cm**-1\n    43:    1632.82 cm**-1\n    44:    1646.95 cm**-1\n    45:    1845.23 cm**-1\n    46:    3184.93 cm**-1\n    47:    3187.86 cm**-1\n    48:    3191.70 cm**-1\n    49:    3193.64 cm**-1\n    50:    3204.14 cm**-1\n    51:    3209.64 cm**-1\n    52:    3487.75 cm**-1\n    53:    3585.96 cm**-1\n</code></pre>"},{"location":"Step_1_Locally_Optimise_Reactant_and_Product.html#troubleshooting-geometric-optimisation-opt-calculations","title":"Troubleshooting Geometric Optimisation (<code>Opt</code>) Calculations","text":"<p>Here are some troubleshooting tips for performing this optimisation step.</p> <p>Note</p> <p>Also read more about electronic convergence issues that are commonly encountered during geometric optimisation jobs in from the ORCA Input Library by clicking here.</p> <ul> <li>The ORCA Input Library is generally a great source of information about performing calculations in ORCA.</li> </ul> <p>Info</p> <p>If you have any issues about this step, raise a <code>New issue</code> at the Issues section by clicking here.</p>"},{"location":"Step_1_Locally_Optimise_Reactant_and_Product.html#orca-would-not-converge-but-reached-the-maximum-number-of-optimization-cycles","title":"ORCA would not <code>converge but reached the maximum number of optimization cycles.</code>","text":"<p>A common problem that can arise is the message from ORCA saying that it could not converge because it had reached the maximum number of optimisation cycles.</p> <pre><code>    ----------------------------------------------------------------------------\n                                   ERROR !!!\n       The optimization did not converge but reached the maximum\n       number of optimization cycles.\n       As a subsequent Frequencies calculation has been requested\n       ORCA will abort at this point of the run.\n       Please restart the calculation with the lowest energy geometry and/or\n       a larger maxiter for the geometry optimization.\n    ----------------------------------------------------------------------------\n</code></pre> <p>This indicates that the electronic step could not converged for the last geometric step. This means that ORCA could not find a way to optimise the molecular orbitals for this geometric step. This is a very common issue. In this case, you can replace your initial structure with the last optimised structure given by ORCA. Do this by changing the name of the input file in the <code>orca.inp</code> file from <code>reactant.xyz</code> to <code>orca.xyz</code></p> <pre><code>* xyzfile 1 1 orca.xyz \n</code></pre> <p>However, before proceeding you should check the initial structure you gave to ORCA. </p> <ul> <li>The <code>converge but reached the maximum number of optimization cycles.</code> problem can arise because the initial structure you gave to ORCA was not a good starting point. </li> <li>ORCA requires that you apply your chemical intuition to your system before you run it. Otherwise it can fail. </li> </ul> <p>For example, consider that we want to optimise the following chemical system, where Cu<sup>+</sup> coordinates to the nitrogen in benzylamine: </p> Optimised Reactant <p>If we wanted to obtain this chemical system, we would want to make sure that most of the atoms are roughly in a good bonding position. This is a good example of a good structure to begin with:</p> Initial Structure - Reactant <p>Below is an example of a structure that might have convergence issues because the Cu<sup>+</sup> atom is very far away from the nitrogen. Generally, it is best not to combine separate molecules/compounds in an ORCA calculations unless they are well separated and are not meant to come together for geometry optimisations. This does not apply to <code>SCAN</code> calculations, where you might want to separate two components from each other (For example, separate Cu<sup>+</sup> from benzylamine). We will talk about <code>SCAN</code> calculations in the next section. </p> Initial Structure - Reactant - Not ideal <p>In this case, it would be best to try using a better initial structure where the Cu<sup>+</sup> atom is coordinated to the benzylamine molecule. </p>"},{"location":"Step_3_Optimise_the_Transition_State.html","title":"Step 3: Optimise the Transition State","text":"<p>Tip</p> <p>Download the template folder for this step by clicking the button below and work on the files in the template folder as you read through this tutorial. </p> <p>Download Templates.zip </p> <p>While your SCAN or NEB calculation will have done a good job at finding the transition state, it is a good idea to perform a transition state geometry optimisation to make sure that your transition state lies on the saddlepoint as best as possible. </p> <p>To do this, we will optimise the transition state using the <code>OptTS</code> tag: </p> <ul> <li>The <code>OptTS</code> method is designed to find the most optimal transition state by allowing the molecule to follow the eigenvector (vibrational mode) for the most negative eigenvalue (frequency).</li> </ul> <p>To perform a <code>OptTS</code> calculation, we include the following line in the <code>orca.inp</code>: </p> <pre><code>!OptTS NumFreq TightOPT TightSCF defgrid2\n</code></pre> <p>The tags here indicate the following: </p> <ul> <li><code>OptTS</code>: Indicates that we want to optimise the molecule towards the transition state.</li> <li><code>NumFreq</code>: We want to calculate the numerical frequency after the optimisation process to make sure that our transition state only has one negative vibrational frequency (transition states are defined as the lowest energy point between two local minima that has only 1 negative vibrational frequency). <ul> <li>We are using <code>NumFreq</code> rather than <code>Freq</code>  (analytically calculated vibrational frequency) because of the <code>GEOM</code> settings below (I think, based on the tutorial here)</li> </ul> </li> </ul> <p>We also include the following in our <code>inp</code> file: </p> <pre><code>%GEOM\n    Calc_Hess true # Calculate Hessian in the beginning\n    NumHess true   # Request numerical Hessian (analytical not available)\n    Recalc_Hess 1  # Recalculate the Hessian for every step\nEND\n</code></pre> <p>The reason for these settings is because we want to refine the transition state without converging towards a different saddlepoint unexpectly. This can happen if the Hessian is slightly off, which can happen when using the Hessian approximation methods commonly used in computational chemistry applications.</p> <ul> <li>The Hessian is the second derivative of the potential energy surface (PES), equivalent to the curvature of the PES. It is used to make a desision about how to modify your chemical system so you gets closer to a converged system. It needs to be obtained for each geometric step you perform</li> <li>Calculating the full hessian is very computationally expensive, so commonly approximations are made so that the full hessian does not need to calculated after each geometric step. </li> <li>In this case, I have chosen to calculate the full hessian after each step because I assume I am near the transition state after the SCAN/NEB calculation, and want to make sure it doesn't deviate from converging. This is probably overdoing it however and not completely necessary. </li> <li>From the tutorial here, they recalculate the full hessian after 5 geometric step rather than after every geometric step.</li> </ul> <p>Note</p> <p>See the tutorial here for a reference for these settings</p> <p>Info</p> <p>For all other ORCA calculations such as geometric optimisations, approximations to the Hessian are general helpful and are recommended/set by default. </p> <p>The full <code>orca.inp</code> file for this example is given below (also located here):</p> Example of a ORCA input file for a transition state optimisation calculation<pre><code>!B3LYP DEF2-TZVP D3BJ\n!OptTS NumFreq TightOPT TightSCF defgrid2\n%SCF\n    MaxIter 2000       # Here setting MaxIter to a very high number. Intended for systems that require sometimes 1000 iterations before converging (very rare).\n    DIISMaxEq 5        # Default value is 5. A value of 15-40 necessary for difficult systems.\n    directresetfreq 15 # Default value is 15. A value of 1 (very expensive) is sometimes required. A value between 1 and 15 may be more cost-effective.\nEND\n%CPCM EPSILON 6.02 REFRAC 1.3723 END\n%PAL NPROCS 32 END\n%maxcore 2000\n%GEOM\n    Calc_Hess true # Calculate Hessian in the beginning\n    NumHess true # Request numerical Hessian (analytical not available)\n    Recalc_Hess 1  # Recalculate the Hessian for every step\nEND\n* xyzfile 1 1 orca.073.xyz\n</code></pre>"},{"location":"Step_3_Optimise_the_Transition_State.html#outputs-from-orca","title":"Outputs from ORCA","text":"<p>ORCA will create a number of files. These are the important ones to look at for optimising the transition state geometry: </p> <ul> <li><code>output.out</code>: The output file, which will tell you if the transition state converged or not.</li> <li><code>orca.xyz</code>: This is the transition state found (if convergence was successful)</li> <li><code>orca_trj.xyz</code>: This is the trajectory file that indicates the steps for how the calculation proceeded. </li> </ul> <p>Once ORCA has finished, you want to do the following checks.</p>"},{"location":"Step_3_Optimise_the_Transition_State.html#check-1-look-at-your-transition-state-structure-and-the-energy-profile-and-make-sure-it-looks-ok","title":"Check 1: Look at your transition state structure and the energy profile and make sure it looks ok","text":"<p>Just like in Step 1 for the reactants and products, you also want to look at your transition state and make sure it makes sense to you. </p> <p>IMPORTANT</p> <p>This is a very important check, as it is very possible that ORCA goes off track when locating the transition state. This is a problem not just for ORCA, but for any computational chemistry software. </p> <p>You can check the transition state by opening up the <code>orca.xyz</code> file. You can do this in ASE by:</p> <ol> <li>Opening a new terminal</li> <li><code>cd</code> into the optimisation folder</li> <li>Type <code>ase gui orca.xyz</code> into the terminal</li> </ol> <pre><code># cd into your transition state optimisation folder\ncd ORCA_Mechanism_Procedure/Examples/Step3_Opt_TS\n\n# View the transition state \nase gui orca.xyz\n</code></pre> <p>This is what I got for this example (see below). </p> <ul> <li>When comparing this transition state to the reactants and products, I can see that the hydrogen atom attached to the Cu atom has moved closer to the C atom.</li> <li>For this reason, I am happy with this transition state.</li> </ul> Example of an optimised transition state"},{"location":"Step_3_Optimise_the_Transition_State.html#check-2-did-the-transition-state-converge-successfully","title":"Check 2: Did the transition state converge successfully","text":"<p>Just like when we were checking convergence of the product and reactant in Step 1, we want to find the geometry convergence table from the ORCA output file and check that we are happy that the transition state converged properly, and we have got the <code>HURRAY THE OPTIMIZATION HAS CONVERGED</code> message: </p> Extract of geometry convergence information from the ORCA output file<pre><code>                                .--------------------.\n          ----------------------|Geometry convergence|-------------------------\n          Item                value                   Tolerance       Converged\n          ---------------------------------------------------------------------\n          Energy change      -0.0000006058            0.0000010000      YES\n          RMS gradient        0.0000068824            0.0000300000      YES\n          MAX gradient        0.0000245794            0.0001000000      YES\n          RMS step            0.0001699439            0.0006000000      YES\n          MAX step            0.0005685514            0.0010000000      YES\n          -------------------------------------------------------------------------\n          ........................................................\n          Max(Bonds)      0.0001      Max(Angles)    0.02\n          Max(Dihed)        0.03      Max(Improp)    0.00\n          ---------------------------------------------------------------------\n\n                    ***********************HURRAY********************\n                    ***        THE OPTIMIZATION HAS CONVERGED     ***\n                    *************************************************\n</code></pre>"},{"location":"Step_3_Optimise_the_Transition_State.html#check-3-check-that-we-have-only-1-negative-vibrational-frequency","title":"Check 3: Check that we have only 1 negative vibrational frequency","text":"<p>We want to look at the frequency calculation results from the ORCA output file and check that there is only 1 negative frequency. This tells us that we are on a saddlepoint on the potential energy landscape.</p> <ul> <li>Generally any negative frequency is good, but a negative frequency that is greater than \\(-100cm^{-1}\\) is a good sign that the transition state is good. <ul> <li>This is because the value of the frequency indicates the curvative of the transition state across the saddlepoint. The bigger the number, the steeper the energy decent on each side of the saddlepoint.</li> </ul> </li> <li>A negative frequency between \\(-20cm^{-1}\\) and \\(-100cm^{-1}\\) is fine, but just beware you may have problems with Step 4 for technical reasons.</li> </ul> <p>In the example below, you can see we only have one negative vibrational frequency, so our transition state is good to go!</p> Extract of vibrational frequency information from the ORCA output file<pre><code>-----------------------\nVIBRATIONAL FREQUENCIES\n-----------------------\n\nScaling factor for frequencies =  1.000000000  (already applied!)\n\n     0:       0.00 cm**-1\n     1:       0.00 cm**-1\n     2:       0.00 cm**-1\n     3:       0.00 cm**-1\n     4:       0.00 cm**-1\n     5:       0.00 cm**-1\n     6:    -822.13 cm**-1  ***imaginary mode***\n     7:      58.18 cm**-1\n     8:      84.13 cm**-1\n     9:     171.84 cm**-1\n    10:     228.59 cm**-1\n    11:     260.60 cm**-1\n    12:     361.45 cm**-1\n    13:     413.26 cm**-1\n    14:     427.65 cm**-1\n    15:     490.08 cm**-1\n    16:     523.52 cm**-1\n    17:     579.22 cm**-1\n    18:     633.50 cm**-1\n    19:     639.19 cm**-1\n    20:     695.96 cm**-1\n    21:     713.56 cm**-1\n    22:     792.39 cm**-1\n    23:     809.13 cm**-1\n    24:     861.16 cm**-1\n    25:     949.18 cm**-1\n    26:     991.84 cm**-1\n    27:    1017.62 cm**-1\n    28:    1022.53 cm**-1\n    29:    1049.37 cm**-1\n    30:    1092.26 cm**-1\n    31:    1104.90 cm**-1\n    32:    1144.41 cm**-1\n    33:    1181.20 cm**-1\n    34:    1182.34 cm**-1\n    35:    1208.39 cm**-1\n    36:    1244.74 cm**-1\n    37:    1336.79 cm**-1\n    38:    1369.30 cm**-1\n    39:    1437.49 cm**-1\n    40:    1492.70 cm**-1\n    41:    1532.23 cm**-1\n    42:    1618.01 cm**-1\n    43:    1621.65 cm**-1\n    44:    1641.40 cm**-1\n    45:    1776.88 cm**-1\n    46:    3170.21 cm**-1\n    47:    3174.89 cm**-1\n    48:    3183.78 cm**-1\n    49:    3191.79 cm**-1\n    50:    3197.99 cm**-1\n    51:    3200.88 cm**-1\n    52:    3527.19 cm**-1\n    53:    3629.01 cm**-1\n</code></pre>"},{"location":"Step_3_Optimise_the_Transition_State.html#check-4-optional-check-how-orca-optimised-your-transition-state","title":"Check 4 (Optional): Check how ORCA optimised your transition state","text":"<p>If you think there might be something funny happening, it is sometimes a good idea to check how ORCA optimised your transition state.</p> <p>You can do this by changing directory into the transition state folder and typing <code>viewORCA opt</code> into the terminal. </p> <pre><code># change directory into the Step3_Opt_TS folder\ncd ORCA_Mechanism_Procedure/Examples/Step3_Opt_TS\n\n# View the geometry optimisation by ORCA in ASE using viewORCA opt\nviewORCA opt\n</code></pre> <p>NOTE 1</p> <p><code>viewORCA opt</code> will also create a xyz file called <code>OPT_images.xyz</code> that you can copy and view on your own computer. </p> <ul> <li>If you just want to create the <code>OPT_images.xyz</code> file, type into the terminal <code>viewORCA opt --view False</code> (which will create the <code>OPT_images.xyz</code> file without opening an <code>ase gui</code> window). </li> </ul> <p>NOTE 2</p> <p>Do not expect the energy to go down. The energy may go up during the geometry optimisation, as we are trying to find a saddlepoint on the potential energy surface rather than a local mininum. </p>"},{"location":"Step_3_Optimise_the_Transition_State.html#other-information-about-performing-scans-in-orca","title":"Other Information about performing SCANs in ORCA","text":"<p>Click here to learn more about transition state calculations from the ORCA Input Library.</p> <p>Note</p> <p>The ORCA Input Library is a great source of information about performing calculations in ORCA.</p>"},{"location":"Step_3_Optimise_the_Transition_State.html#troubleshooting-transition-state-geometry-optimisations-optts-calculations","title":"Troubleshooting transition state geometry optimisations (<code>OptTS</code>) calculations","text":"<p>Here are some troubleshooting tips for performing this optimisation step.</p> <p>No troubleshooting issues have been found yet. </p> <p>Info</p> <p>If you have any issues about this step, raise a <code>New issue</code> at the Issues section by clicking here.</p>"},{"location":"Step_5_Compile_Results.html","title":"Step 5: Compile Results","text":"<p>Having now finished the full reaction mechanism investigation using ORCA, we can now compile the results from our calculations in order to present information about the structures and energies of the reactants, products, and the transition state. Follow the steps below: </p>"},{"location":"Step_5_Compile_Results.html#step-5a-double-check-results","title":"Step 5A: Double Check Results","text":"<p>Before finalising everything, it is important to do a final check that everything is all good and that there are no issues with your output files from this proceedure and you are happy with all the calculations and the decisions you made, as this process is often not smooth and requires playing around. So finalising everything is a good idea to make sure you haven't missed anything important. </p> <p>IMPORTANT</p> <p>It is very important that you double check your calculations. Do not skip this step. </p>"},{"location":"Step_5_Compile_Results.html#step-5b-obtain-the-energies-and-structures-of-your-reactants-products-and-transition-state","title":"Step 5B: Obtain the Energies and Structures of your Reactants, Products, and Transition State","text":"<p>We now can obtain the energies and structures for the reactant, product, and transition state. To do this, we want to compare the energies of the <code>Reactant</code> and <code>Product</code> with the <code>Forward</code> and <code>Backwards</code> structure from Step 4B steps. It is good to do this because sometimes the structures from 4B might be slightly lower energy than what was obtain from Step 1. </p> <p>NOTE 1</p> <p>We want to take the Gibb's Free Energy, so make sure you take this energy value from the <code>output.out</code> files. We can obtain this value because we have run the vibrational frequency calculation, which allows the vibrational entropy to be calculated. You will find these if you look for the <code>GIBBS FREE ENERGY</code> header in the <code>output.out</code> file. </p> <p>NOTE 2</p> <p>The energy values you get will be in hartrees (unit are Eh or Ha). It is important to record the whole hartrees energy value to the full decimal places. </p> <p>In this example:</p> <ul> <li>The energy of the <code>Reactant</code> is \\(-1967.08229026 \\rm{Eh}\\), while the energy of the <code>Backwards</code> structure from Step 4B is \\(-1967.08247260 \\rm{Eh}\\). The <code>Backwards</code> structure has a lower energy than the <code>Reactant</code> structure. </li> <li>The energy of the <code>Product</code> is \\(-1967.03538282 \\rm{Eh}\\), while the energy of the <code>Forwards</code> structure from Step 4B is \\(-1967.03535224 \\rm{Eh}\\). The <code>Product</code> structure has a lower energy than the <code>Forwards</code> structure. </li> </ul> <p>From Step 3, the energy of the transition state is \\(-1967.01477769 Eh\\). </p> <p>NOTE 3</p> <p>Record all these numbers, as you will need the absolute values when collecting the energy for all the mechanistic step across the one or more mechanisms that you are studying. </p> <p>NOTE 4</p> <p>The conversion from Hartrees (Eh or Ha) to kJ/mol to multiply the Hartree energy by 2625.5 to get the energy in kJ/mol</p> <p>The energy profile for this example is shown below</p> Energy Profile for this Example <p>Here: </p> <ul> <li>The energy from the reactant to transition state is \\(-1967.01477769 \\rm{Eh} - -1967.08247260 \\rm{Eh} = 0.06769491 \\rm{Eh}\\) which in kJ/mol is \\(0.06769491 \\rm{Eh} \\times 2625.5 = 177.3 \\rm{kJ/mol}\\) (1dp).</li> <li>The energy from the product  to transition state is \\(-1967.01477769 \\rm{Eh} - -1967.03538282 \\rm{Eh} = 0.02060513 \\rm{Eh}\\) which in kJ/mol is \\(0.02060513 \\rm{Eh} \\times 2625.5 = 54.1  \\rm{kJ/mol}\\) (1dp).</li> </ul> <p>From this result, the activation energy for this reaction is 177 kJ/mol. </p>"},{"location":"Step_2_Examine_Reaction_Pathway/index.html","title":"Step 2: Examine the Reaction Pathway","text":"<p>Next, we want to determine what the path that the mechanistic step takes and obtain the transition state for this step. </p> <ul> <li>If you have two or more reactants/products that you would like to react together, you will first want to append them into the same xyz file.</li> <li>See Step 2A - Prepare Reaction System to learn more about preparing the xyz file for your reaction system when dealing with two or more reactants/products.</li> </ul> <p>Once you have prepared your reaction system or you are happy with the xyz file that you will use, you will want to examine the reaction pathway for your mechanistic step of interest. There are two methods for doing this:</p> <ul> <li> <p>Step 2Ba - The SCAN method</p> <p>This method works by gradually changing the distance between two atoms (or the bonding angle between three atoms) to force atoms to rearrange or bonds to form/break.</p> <p> Click here to learn how to run a SCAN job</p> </li> <li> <p>Step 2Bb - The Nudged Elastic Band (NEB) method</p> <p>This method works by tracing a number of images across the mechanism from reactant to product, and optimising the images across the potential energy surface (PES). </p> <p> Click here to learn how to run a NEB job</p> </li> </ul> <p>Choose one of these methods for this step.</p> <p>Recommendation</p> <p>I usually perform the SCAN method rather than the NEB method. This is because the NEB method is a bit more involved and requires some preprocessing before running the actual NEB calculation. The SCAN method is a bit more straight-forward. </p> <ol> <li>Try running the SCAN method first.</li> <li>If you have difficulty using the SCAN method for your system, or you think your mechanism is more complicate than a single bond forming/breaking event, switch to using the NEB method. </li> </ol>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2A_Prepare_The_Reaction_System.html","title":"Step 2A - Prepare The Reaction System","text":"<p>Consider that you have a mechanistic step that contains two or more reactants/products. To perform Step 2 (either by performing a SCAN or Nudged Elastic Band calculation), you will need to place all your reactants/all your products into the same xyz file. </p> <p>This section will look at how to append multiple chemical systems in various xyz files together so that you can examine the reaction pathway in wither Step 2Ba - SCAN or Step 2Bb - Nudged Elastic Band. </p>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2A_Prepare_The_Reaction_System.html#step-2a1-move-the-centre-of-masses-of-your-chemical-systems","title":"Step 2A.1 - Move the Centre of Masses of your Chemical Systems","text":"<p>Before we combine multiple chemical systems together, we need to make sure that we dont accidently place one molecule in the middle of another molecule. The easiest way to solve this problem is to move the centre of mass of your chemical systems some distance apart from each other. You can do this by using the <code>viewORCA move_com</code> module. To run this module: </p> <ol> <li>Change directory into the folder containing the <code>xyz</code> files of the chemical systems you want to change the centre of masses of.</li> <li>Run the <code>viewORCA move_com filepath --move_com_to=move_com_to</code> module as shown below, where <code>filepath</code> is the path to the <code>xyz</code> file you would like to move the centre of mass of, and <code>move_com_to</code> is the \\((x,y,z)\\) coordinates where you would like to move the centre of mass of your system to. <ul> <li>Note: The format of <code>move_com_to</code> should be <code>x,y,z</code>. i.e: <code>move_com_to=x,y,z</code></li> </ul> </li> </ol> <pre><code># First, change directory to the folder that contains the xyz files that yuou want to change the centre of masses of.\ncd folder_containing_xyz_files\n\n# Second, move the centre of mass of your chemical system\nviewORCA move_com filepath --move_com_to=move_com_to\n</code></pre> <p>The <code>viewORCA move_com</code> module will create a new xyz file that contains <code>move_com_to</code> in the filename. This <code>xyz</code> file will contain your chemical system with its centre of mass moved to move_com_to.</p> <p>Example</p> <p>Suppose that we have a Cu(II)-Benzylimine that we want to react with Benzylamine. We decide that we want the Cu(II)-Benzylimine to be centred at the origin while we want Benzylamine to be centered at \\((10.0, 0.0, 0.0)\\). To do this we would do the following in the terminal:</p> <pre><code># First, change directory to the folder that contains the Cu(II)-Benzylimine and Benzylamine xyz files.\ncd folder_containing_xyz_Benzylamine.xyz\n\n# Second, move the centre of mass of Cu(II)-Benzylimine to the origin (0,0,0).\nviewORCA move_com Cu_II-BnzImine_1+.xyz --move_com_to=0,0,0\n\n# Third, move the centre of mass of Benzylamine to (10,0,0).\nviewORCA move_com Benzylamine.xyz --move_com_to=10,0,0\n</code></pre> <p><code>viewORCA move_com</code> will move the centre of masses of Cu(II)-Benzylimine and Benzylamine and save them into the files called <code>Cu_II-BnzImine_1+_com_0_0_0.xyz</code> and <code>Benzylamine_com_10.0_0.0_0.0.xyz</code>. This example is given in Examples/Step2_Find_TS/Step_2A/Step_2A1_Move_COM.</p> <p> Image of Cu(II)-Benzylimine before and after its centre of mass is moved. </p> <p> Image of Benzylamine before and after its centre of mass is moved. </p>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2A_Prepare_The_Reaction_System.html#step-2a2-combine-your-xyz-files-into-one-chemical-system","title":"Step 2A.2 - Combine your <code>xyz</code> files into One Chemical System","text":"<p>Now that we have moved our molecules in Step 2A.1, we can now combine them together knowing that they wont accidently merge together. There are two ways to do this:</p>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2A_Prepare_The_Reaction_System.html#option-1-use-vieworca-combine","title":"Option 1: Use <code>viewORCA combine</code>","text":"<p>The first option is to use <code>viewORCA combine</code> to combine multiple <code>xyz</code> files together. To do this:</p> <ol> <li>In the terminal, change directory into the directory containing the xyz files of the chemical systems you want to combine together. </li> <li> <p>type <code>viewORCA combine filepath_for_system_1 filepath_for_system_2 filepath_for_system_3 ...</code> into the terminal, where:</p> <ul> <li><code>filepath_for_system_1, filepath_for_system_2, ...</code> are the paths to all the xyz files you would like to combine together.  </li> </ul> </li> </ol> <p><code>viewORCA combine</code> will print the shortest distances between the chemical system you combine together so you know they are a good distance from each other. If you see that any distance is less than 3.0 \u00c5, you may have accidently merged your chemical systems together. </p> <p>The output file will be save into your current working directory as <code>overall_chemical_system.xyz</code>. Check you have not accidently merged your chemical systems by looking at the xyz file in a GUI (like Avogadro or <code>ase gui</code>). Once you are happy with the contents of this file, change the filename of this <code>xyz</code> file to what you want it to be named. </p> <p>Example</p> <p>Say we want to combine an <code>xyz</code> file containing a Cu(II)-benzylimine molecule (with centre of mass = \\((0.0, 0.0, 0.0)\\)) with another <code>xyz</code> file containing a benylamine molecule (with centre of mass = \\((10.0, 0.0, 0.0)\\)). We would run the code below to achieve this:</p> <pre><code># First, change directory into the folder containing your xyz files you want to combine together. \ncd path_to_xyz_files\n\n# Second, run \"viewORCA move_com\".\nviewORCA combine Benzylamine_com_10.0_0.0_0.0.xyz Cu_II-BnzImine_1+_com_0_0_0.xyz\n</code></pre> <p><code>viewORCA combine</code> will print the shortest distances between the chemical system you combine together so you know they are a good distance from each other. If you see that any distance is less than 3.0 \u00c5, you may have accidently merged your chemical systems together. </p> <p>You will also see a new file has been made called <code>overall_chemical_system.xyz</code> that contains your overall chemical system. This example is given in Examples/Step2_Find_TS/Step_2A/Step_2A2_Combine.</p> <p> Combining Benzylamine and Cu(II)-benzylimine into one xyz file. </p>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2A_Prepare_The_Reaction_System.html#option-2-copy-the-coordinates-of-one-xyz-file-into-another-xyz-file","title":"Option 2: Copy the coordinates of one <code>xyz</code> file into another <code>xyz</code> file","text":"<p>The other way to combine multiple <code>xyz</code> files together is to copy and paste each <code>xyz</code> file one after the other in a new xyz <code>file</code>. This is what is happening in Option 1: Use <code>viewORCA combine</code>, but done automatically by <code>viewORCA</code>. </p> <ul> <li>If you do this, make sure you change the first line in your <code>xyz</code> file to the total number of atoms in your combined system.</li> </ul> <p>Example</p> <p>Consider now that we want to manually combine the xyz file for Cu(II)-benzylimine molecule (with centre of mass = \\((0.0, 0.0, 0.0)\\)) with another <code>xyz</code> file containing a benylamine molecule (with centre of mass = \\((10.0, 0.0, 0.0)\\)). </p> Benzylamine_com_10.0_0.0_0.0.xyz<pre><code>17\nProperties=species:S:1:pos:R:3 Energy:=T 18.1285528=T pbc=\"F F F\"\nC        8.82798764      -0.72923719      -0.21980796\nC        9.64720764       0.40132281      -0.05602796\nC        9.37118764      -2.01621719      -0.16348796\nC       10.73913764      -2.18955719       0.05608204\nC       11.02826764       0.21373281       0.16385204\nC       11.56615764      -1.07620719       0.21909204\nH       12.62668764      -1.21243719       0.38803204\nH       11.15850764      -3.18639719       0.09917204\nH       11.69849764       1.05282281       0.29167204\nH        7.76473764      -0.61273719      -0.39123796\nH        8.73069764      -2.87946719      -0.29048796\nC        9.00217764       1.76893281      -0.12848796\nN        9.95429764       2.85972281       0.06699204\nH        8.20434764       1.83886281       0.64416204\nH        8.53106764       1.88010281      -1.12939796\nH       10.30117764       2.83572281       1.05381204\nH        9.44922764       3.76619281      -0.06206796\n</code></pre> Cu_II-BnzImine_1+_com_0_0_0.xyz<pre><code>15\nProperties=species:S:1:pos:R:3 Energy:=T 12.9406666=T pbc=\"F F F\"\nC       -2.46950657      -0.54117045      -0.11252192\nC       -1.07283657      -0.69096045      -0.09875192\nC       -0.52041657      -1.97965045      -0.22782192\nC       -1.35452657      -3.09358045      -0.36770192\nC       -2.74232657      -2.93319045      -0.38011192\nC       -3.29917657      -1.65825045      -0.25265192\nH       -2.91808657       0.43999955      -0.01486192\nH        0.55217343      -2.12735045      -0.22082192\nH       -0.92436657      -4.08190045      -0.46654192\nH       -3.38600657      -3.79657045      -0.48847192\nH       -4.37448657      -1.53509045      -0.26240192\nC       -0.21642657       0.50638955       0.05072808\nN        1.06287343       0.41467955       0.06831808\nH       -0.67253657       1.48676955       0.14814808\nCu       2.15844343       2.02501955       0.26814808\n</code></pre> <p>To do this, we open a new file in our text editor (such as <code>Sublime</code>), and copy the elements and positions of all the atoms in Benzylamine_com_10.0_0.0_0.0.xyz, then do the same for <code>Cu_II-BnzImine_1+_com_0_0_0.xyz</code>. </p> <p>At the top of this new file, we will need to add two lines:</p> <ol> <li>The first line indicates the number of atoms in this combined system, which in this case is <code>32</code></li> <li>The second line indicates what information about the atoms given in this file (i.e., the element and \\((x,y,z)\\) position). This should be <code>Properties=species:S:1:pos:R:3 pbc=\"F F F\"</code> (<code>pbc</code> here indicates there is no periodic boundary condition set).</li> </ol> overall_chemical_system.xyz<pre><code>32\nProperties=species:S:1:pos:R:3 pbc=\"F F F\"\nC        8.82798764      -0.72923719      -0.21980796\nC        9.64720764       0.40132281      -0.05602796\nC        9.37118764      -2.01621719      -0.16348796\nC       10.73913764      -2.18955719       0.05608204\nC       11.02826764       0.21373281       0.16385204\nC       11.56615764      -1.07620719       0.21909204\nH       12.62668764      -1.21243719       0.38803204\nH       11.15850764      -3.18639719       0.09917204\nH       11.69849764       1.05282281       0.29167204\nH        7.76473764      -0.61273719      -0.39123796\nH        8.73069764      -2.87946719      -0.29048796\nC        9.00217764       1.76893281      -0.12848796\nN        9.95429764       2.85972281       0.06699204\nH        8.20434764       1.83886281       0.64416204\nH        8.53106764       1.88010281      -1.12939796\nH       10.30117764       2.83572281       1.05381204\nH        9.44922764       3.76619281      -0.06206796\nC       -2.46950657      -0.54117045      -0.11252192\nC       -1.07283657      -0.69096045      -0.09875192\nC       -0.52041657      -1.97965045      -0.22782192\nC       -1.35452657      -3.09358045      -0.36770192\nC       -2.74232657      -2.93319045      -0.38011192\nC       -3.29917657      -1.65825045      -0.25265192\nH       -2.91808657       0.43999955      -0.01486192\nH        0.55217343      -2.12735045      -0.22082192\nH       -0.92436657      -4.08190045      -0.46654192\nH       -3.38600657      -3.79657045      -0.48847192\nH       -4.37448657      -1.53509045      -0.26240192\nC       -0.21642657       0.50638955       0.05072808\nN        1.06287343       0.41467955       0.06831808\nH       -0.67253657       1.48676955       0.14814808\nCu       2.15844343       2.02501955       0.26814808\n</code></pre>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Ba_The_SCAN_Method.html","title":"Step 2Ba: The SCAN Method","text":"<p>Tip</p> <p>Download the template folder for this step by clicking the button below and work on the files in the template folder as you read through this tutorial. </p> <p>Download Templates.zip </p> <p>In a SCAN calculation, we want to map how a reaction proceeds by gradually changing the distance between two atoms. The SCAN calculation works as follows:</p> <ol> <li>Perform a geometric optimisation on the chemical system, where the distance between two atoms are fixed.</li> <li>Repeat the geometric optimisation on the same chemical system, where the position of the two atoms is changed by \\(dx\\).</li> <li>Repeat this until the distance between the two atoms changes to the desired final length. </li> </ol> <p>To perform a SCAN, we first include this line in our input file:</p> <pre><code>!OPT NormalOPT TightSCF defgrid2 # Try TightOPT if you have convergence problems. \n</code></pre> <p>The tags here indicate you want to do the following: </p> <ul> <li><code>OPT</code>: Indicates you want ORCA to perform local optimisations during your SCAN calculation. </li> <li><code>TightSCF</code>: Tells ORCA to tighten the convergence criteria for each electronic step. </li> <li><code>defgrid2</code>: Indicates how fine we want the intergration grid to be (This is the default)</li> <li><code>NormalOPT</code>: Indicate we want to use normal geometric convergence settings. </li> </ul> <p>Tip</p> <p>For these calculations we want to use <code>NormalOPT</code> rather than <code>TightOPT</code> because we are only wanting to get a good idea of what the transition state looks like. </p> <ul> <li><code>NormalOPT</code> is ideal for SCAN calculations as it is the usual convergence criteria for performing optimisations, and will run faster than using <code>TightOPT</code>. </li> <li>However, if you have problems with convergence issues, you can try using <code>TightOPT</code>. See the ORCA 6.1.0 Manual, page 618 for more information.</li> </ul> <p>We also include the following lines:</p> Extra lines required for a SCAN calculation<pre><code>%GEOM \n    SCAN B atom_index_1 atom_index_2 = initial_distance, final_distance, linespace+1 END \nEND\n</code></pre> <p>where:</p> <ul> <li><code>atom_index_1</code>: This is the index of the first atom. Obtain this using <code>ase gui</code>.</li> <li><code>atom_index_2</code>: This is the index of the second atom. Obtain this using <code>ase gui</code>.</li> <li><code>initial_distance</code>: The initial distance between the two atoms. Get this by measuring the distance between the two atoms in your system using a GUI (such as avogadro or <code>ase gui</code>) and record it here.</li> <li><code>final_distance</code>: The final distance between the two atoms. </li> <li><code>linespace</code>: The number of SCAN steps you want to perform. </li> </ul> <p>An example for these lines is given below:</p> Extra lines required for a SCAN calculation<pre><code>%GEOM \n    SCAN B 11 16 = 3.245, 0.745, 126 END \nEND\n</code></pre> <p>In this example, we have told ORCA to begin by setting the distance between atom 11 and 16 to 3.245 \u00c5, and then decrease the distance between these two atoms to 0.745 \u00c5 in increments of \\(\\frac{3.245-0.745}{126-1} = 0.02\\) \u00c5. </p> <p>NOTE 1</p> <p>You will want to measure the initial distance between your two atoms using a GUI like <code>ase gui</code>. This is the value you want to put in for the initial bond distance. </p> <ul> <li>This is how I got the bond distance between atom 11 and 16 to 3.245 \u00c5 for this example. </li> </ul> <p>NOTE 2</p> <p>ORCA counts atoms starting from 0. This means that in some GUIs (like GView), atom 11 here is atom 12 in GView. In the ASE GUI and all the programs given here, atoms numbers are equal to ORCA. I.e.: atom 11 in the ASE GUI means atom 11 in ORCA. </p> <p>NOTE 3</p> <p>We have set the number of steps to perform to 126 rather than 125. This is because we are including the endpoint in our SCAN, and I want the increments to be spaced by a rational value (i.e.: \\(\\frac{3.245-0.745}{126-1} = 0.02\\) \u00c5 step size). </p> <ul> <li>This is just a personal preference of mine, and is not a hard rule. </li> </ul> <p>In this example, we are looking at how a Cu atom could insert itself into a C-H bond. The <code>orca.inp</code> file for this example is given below (also located here): </p> Example orca.inp file used to perform a SCAN calculation<pre><code>!B3LYP DEF2-TZVP D3BJ\n!OPT NormalOPT TightSCF defgrid2 # Try TightOPT if you have convergence problems. \n%SCF\n    MaxIter 2000       # Here setting MaxIter to a very high number. Intended for systems that require sometimes 1000 iterations before converging (very rare).\n    DIISMaxEq 5        # Default value is 5. A value of 15-40 necessary for difficult systems.\n    directresetfreq 15 # Default value is 15. A value of 1 (very expensive) is sometimes required. A value between 1 and 15 may be more cost-effective.\nEND\n%CPCM EPSILON 6.02 REFRAC 1.3723 END\n%PAL NPROCS 32 END\n%maxcore 2000\n%GEOM \n    SCAN B 11 16 = 3.245, 0.745, 126 END \nEND\n* xyzfile 1 1 opt_product.xyz\n</code></pre>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Ba_The_SCAN_Method.html#outputs-from-orca","title":"Outputs from ORCA","text":"<p>As well as the <code>output.out</code> and <code>orca_trj.xyz</code> files, ORCA will also give:</p> <ul> <li>A series of files called <code>orca.001.xyz</code>, <code>orca.002.xyz</code>, <code>orca.003.xyz</code>, ... up to <code>orca.126.xyz</code>. These are the steps in the SCAN process. </li> </ul> <p>NOTE</p> <p>The <code>orca_trj.xyz</code> contains the xyz files for every geometric optimisation across all SCAN steps, so it can be unhelpful to view on its own. However, keep it as it will be used by the <code>viewORCA</code> program.</p> <p>To view the SCAN mechanism and the energy path, type <code>viewORCA scan</code> in the terminal and hit enter. This will load a program that will allow you to see how the SCAN calculation performed your mechanism, along with the energy profile. </p> <pre><code># cd into your optimisation folder\ncd ORCA_Mechanism_Procedure/Examples/Step2_Find_TS/SCAN\n\n# View the SCAN calculation \nviewORCA scan\n</code></pre> <p>NOTE 1</p> <p><code>viewORCA scan</code> will also create a xyz file called <code>SCAN_images.xyz</code> that you can copy and view on your own computer. </p> <ul> <li>If you just want to create the <code>SCAN_images.xyz</code> file, type into the terminal <code>viewORCA scan --view False</code> (which will create the <code>SCAN_images.xyz</code> file without launching <code>ase gui</code>). </li> </ul> <p>Once you run <code>viewORCA scan</code>, you will get a GUI that shows you the following SCAN pathway:</p> GIF of the SCAN job <p>The energy profile for this example is given below:</p> Energy Profile of the SCAN job <p>NOTE 2</p> <p>The energy goes up at the end because the hydrogen atom is probably getting too close to the carbon atom. We can ignore this part of the SCAN (after around step 110), as it is not relavant to us for finding the transition state for this mechanistic step. </p> <p>The easiest way to use this GUI is to zoom in on the part of the energy profile looks like the transition state (by clicking on the  button), and from this determine the image this corresponds to by looking at the x axis. Move the cursor over the highest point along the energy profile, and read the x value:</p> SCAN Energy Profile - Zoomed in on Transition State <p>This is what the given transition state looks like in this example:</p> Energy Profile of the SCAN job <p>This is a promising transition state, but we need to proceed with steps 3 and 4 to make sure it is ok. </p> <p>Once ORCA has finished and you have viewed your SCAN pathway and obtained your transition state, you should do the following check:</p>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Ba_The_SCAN_Method.html#check-does-the-scan-path-make-sense-chemically-and-physically","title":"Check: Does the SCAN path make sense chemically and physically","text":"<p>You will want to look at the SCAN path and check if it chemically and physically makes sense. If it does not, you need to redo the SCAN and try something else, like making the two atoms contract closer to each other rather than stretch, or maybe try contracting or expanding the distance between other atoms.  </p>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Ba_The_SCAN_Method.html#advice-about-scans","title":"Advice about SCANs","text":"<p>In this example, I forced the SCAN to gradually decrease the distance between atom 11 (C) and atom 16 (H). However, this is not the only way I could have performed this SCAN. </p> <ul> <li>For example, I could have started with the Cu atom bonded to the N atom, and gradually decrease the distance between atoms 11 (C) and 17 (Cu) to force them to form a bond.</li> <li>I decided to start with a C-Cu-H bond and force the C and H to come together because I thought this was the best way to obtain the transition state for this mechanistic step.</li> <li>It is not uncommon that you need to try a few different SCAN paths to get the transition state you are looking for. </li> </ul>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Ba_The_SCAN_Method.html#what-should-i-do-if-i-need-to-restart-a-scan-run","title":"What should I do if I need to restart a SCAN run","text":"<p>Sometimes a SCAN job may fail. However, rather than resetting the SCAN job from beginning, you may want your SCAN job to resume from the last converged SCAN image. </p> <p>If you want to restart the SCAN job from the last converged image, here is a guide to how to do this (click here to see the example files for this procedure in Github):</p> <ol> <li> <p>If you are restarting your SCAN job for the first time: Make a new folder called <code>SCAN_1</code>, and move all your SCAN files into this folder. Do this by running the lines below in your terminal:</p> Make a new SCAN folder and place all SCAN files into it<pre><code>mkdir SCAN_1\nmv -v * SCAN_1\n</code></pre> <p>Note</p> <p>You will see a message like this when you run the <code>mv -v * SCAN_1</code> command. </p> <pre><code>mv: cannot move \u2018SCAN_1\u2019 to a subdirectory of itself, \u2018SCAN_1/SCAN_1\u2019\n</code></pre> <p>This is normal and expected. Ignore this issue. </p> </li> <li> <p>Make a new folder called <code>SCAN_2</code>:</p> Make a new SCAN folder<pre><code>mkdir SCAN_2\n</code></pre> </li> <li> <p>Copy the ORCA input file, slurm submit file, and the last converged SCAN xyz file. This is the latest numbered xyz file. An example of this is given below:</p> Copy SCAN file from the previous SCAN job over to the new SCAN folder<pre><code>cp -rv SCAN_1/orca.inp     SCAN_2/orca.inp\ncp -rv SCAN_1/submit.sl    SCAN_2/submit.sl\ncp -rv SCAN_1/orca.059.xyz SCAN_2/orca.059.xyz\n</code></pre> </li> <li> <p>Change directory into the new SCAN folder, then change the name of the last converged SCAN xyz file to another name, such as <code>last_converged_SCAN_image_restart.xyz</code></p> Copy SCAN file from the previous SCAN job over to the new SCAN folder<pre><code>cd SCAN_2\nmv orca.059.xyz last_converged_SCAN_image_restart.xyz\n</code></pre> </li> <li> <p>Open the copied <code>orca.inp</code> file, and make two changes to this file</p> <ol> <li> <p>Change the name of the xyz file give in in the <code>xyzfile</code> line to <code>last_converged_SCAN_image_restart.xyz</code></p> <pre><code>* xyzfile 1 1 last_converged_SCAN_image_restart.xyz\n</code></pre> </li> <li> <p>In the <code>GEOM</code> section: </p> <ul> <li>Change the bond distance between the two atoms of interest as given in <code>last_converged_SCAN_image_restart.xyz</code>. Get this by measuring the distance between the two atoms of interest in <code>ase gui last_converged_SCAN_image_restart.xyz</code></li> <li>Change the number of SCAN iterations to perform in order to keep displacement between SCAN images the same. For example, here the original displacement was \\(\\frac{\\rm{d_f} - \\rm{d_i}}{(\\rm{no.\\:SCAN\\:interations})-1} = \\frac{3.245 - 0.745}{126-1} = 0.02\\). The distance between atoms 11 and 16 in <code>last_converged_SCAN_image_restart.xyz</code> is <code>2.285 \u00c5</code>. Therefore, we need to perform \\(\\frac{d_f(\\rm{new}) - d_i}{\\rm{displacement}}+1 = \\frac{2.085 - 0.745}{0.02}+1 = 68\\) (The \\(+1\\) is so we include the initial image in the SCAN procedure).</li> </ul> <p>An examples of the two components of <code>GEOM</code> that need to be changed are given below</p> <pre><code>%GEOM\n    SCAN B 11 16 = new_initial_distance, 0.745, no_of_SCAN_iterations END\nEND\n</code></pre> <p>For example:</p> <pre><code>%GEOM\n    SCAN B 11 16 = 2.085, 0.745, 68 END\nEND\n</code></pre> </li> </ol> <p>An example of the updated <code>orca.inp</code> file is shown below</p> Example of the orca.inp file for the updated SCAN job<pre><code>!B3LYP DEF2-TZVP D3BJ\n!OPT NormalOPT TightSCF defgrid2 # Try TightOPT if you have convergence problems. \n%SCF\n    MaxIter 2000       # Here setting MaxIter to a very high number. Intended for systems that require sometimes 1000 iterations before converging (very rare).\n    DIISMaxEq 5        # Default value is 5. A value of 15-40 necessary for difficult systems.\n    directresetfreq 15 # Default value is 15. A value of 1 (very expensive) is sometimes required. A value between 1 and 15 may be more cost-effective.\nEND\n%CPCM EPSILON 6.02 REFRAC 1.3723 END\n%PAL NPROCS 32 END\n%maxcore 2000\n%GEOM \n    SCAN B 11 16 = 2.085, 0.745, 68 END\n    MaxIter 200 \nEND\n* xyzfile 1 1 last_converged_SCAN_image_restart.xyz\n</code></pre> <p>Note</p> <p>I have also included <code>MaxIter 200</code> in thr <code>GEOM</code> section. This was because I was having convergence issues because the number of geometry optimisations was going over the default value of <code>50</code>. I increased this to <code>200</code> so that it would run without problems in this example. </p> </li> <li> <p>Submit your ORCA job to slurm, or run your ORCA job however you usually run ORCA. </p> </li> </ol> <p>Once your SCAN job has completed to your satisfaction, you can use <code>viewORCA scan</code> to view all your SCAN runs together. To do this, run <code>viewORCA scan</code> in the folder containing your <code>SCAN_1</code>, <code>SCAN_2</code>, <code>SCAN_3</code>, ... folders. <code>viewORCA scan</code> will collate all the SCAN jobs together in numerical order so that it looks as if only one SCAN job ran.</p> <p>Tip</p> <p><code>viewORCA scan</code> will also still create a <code>SCAN_images.xyz</code> file, containing the SCANs from all your SCAN folders pasted together. </p> <p>Note</p> <ul> <li>Click here to see the example files for this procedure in Github. </li> <li>Click here for the <code>SCAN_images.xyz</code> created for this restarted SCAN job. You should see that it gives the same <code>SCAN_images.xyz</code> file as if the SCAN job ran successfully in one go (as given here).</li> </ul>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Ba_The_SCAN_Method.html#other-information-about-performing-scan-calculations-in-orca","title":"Other information about performing <code>SCAN</code> calculations in ORCA","text":"<p>Click here to learn more about SCAN calculations from the ORCA Input Library.</p> <p>Note</p> <p>The ORCA Input Library is a great source of information about performing calculations in ORCA.</p>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Ba_The_SCAN_Method.html#troubleshooting-the-scan-calculation","title":"Troubleshooting the <code>SCAN</code> calculation","text":"<p>Here are some troubleshooting tips for performing this optimisation step.</p> <p>No troubleshooting issues have been found yet. </p> <p>Info</p> <p>If you have any issues about this step, raise a <code>New issue</code> at the Issues section by clicking here.</p>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html","title":"Step 2Bb: Nudged Elastic Band (NEB) Calculations (UNDER CONSTRUCTION)","text":"<p>Tip</p> <p>Download the template folder for this step by clicking the button below and work on the files in the template folder as you read through this tutorial. </p> <p>Download Templates.zip </p> <p>In an NEB, we trace a path from the reactant to the product. An optimisation is performed across all the images at the same time in order to try to find the transition step.</p> <p>Note</p> <p>The NEB process is a bit more involved compared to the other steps. </p> <p>The general steps for performing an NEB calculation are:</p> <ol> <li>Choose an optimised structure and modify it.</li> <li>Optimise the modified structure with constraints (optional, but recommended).</li> <li>Optimise the modified structure without constraints.</li> <li>Double-check the reactant and product structures.</li> <li>Perform the Climbing Image - Nudge Elastic Band (CI-NEB) calculation.</li> </ol>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#step-2bb1-choose-an-optimised-structure-and-modify-it","title":"Step 2Bb.1: Choose an Optimised Structure and Modify it","text":"<p>To begin, it is a good idea to take either the optimised <code>Reactant</code> or <code>Product</code> structure from Step 1. Then, move the relevant atoms in the structure of the <code>Reactant</code> (<code>Product</code>) so that it resembles the <code>Product</code> (<code>Reactant</code>) somewhat. </p> <ul> <li>The reason for doing this is to make sure any atoms not involved directly in the mechanism are: <ol> <li>Ordered correctly for NEB calculations, and </li> <li>To try to keep these atoms in the same position as best as possible. </li> </ol> </li> <li>The reason for doing this will be clearer once we perform the NEB calculation in Step 2Bb.5. </li> </ul> <p>Tip</p> <p>Once you have moved the atoms in your modified structure, make sure the modified atoms are fairly close to each other. This is because ORCA (as well as any DFT program) can have trouble optimising structures where atoms are initially far away from each other. </p> <ul> <li>As a rule of thumb, any atoms you have modified that are bonded to eachother should be about ~0.5 \u00c5 - ~0.75 \u00c5 apart. It is easier for ORCA to increase bond lengths during optimisations rather than decrease them. </li> </ul> <p>In this example below, I have chosen the <code>Product</code> structure to focus on. I then moved atom 17 (Cu) to the other side of the N atom (atom 12), and moved atom 14 (H) down so that it was close to the C atom (atom 11). </p> Example where the optimised product has been modified to resemble the reactant structure."},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#step-2bb2-optimise-reactant-from-product-or-product-from-reactant-with-constraints-optional-but-recommended","title":"Step 2Bb.2: Optimise Reactant from Product (or Product from Reactant) With Constraints (Optional but Recommended)","text":"<p>Next, we perform a geometric optimisation calculation on this modified structure. However, we don't want the atoms that are not involved in the mechanism to move. </p> <ul> <li>To achieve this, we constrain the atoms in the molecule that are not involved in the mechanism.</li> </ul> <p>In this example, we will optimise the newly created reactant structure. Here, we have chosen to constrain the atoms in the benzene moiety from moving. The <code>orca.inp</code> file for this example is given below (also located here): </p> Example orca.inp file used to perform a geometric optimisation calculation, including constrained atoms<pre><code>!B3LYP DEF2-TZVP D3BJ \n!OPT FREQ TightOPT TightSCF defgrid2\n%SCF\n    MaxIter 2000       # Here setting MaxIter to a very high number. Intended for systems that require sometimes 1000 iterations before converging (very rare).\n    DIISMaxEq 5        # Default value is 5. A value of 15-40 necessary for difficult systems.\n    directresetfreq 15 # Default value is 15. A value of 1 (very expensive) is sometimes required. A value between 1 and 15 may be more cost-effective.\nEND\n%CPCM EPSILON 6.02 REFRAC 1.3723 END\n%PAL NPROCS 32 END\n%maxcore 2000 # This indicates you want ORCA to use only 2GB per core maximum, so ORCA will use only 2GB*32=64GB of memory in total.\n%GEOM\n    Constraints\n        {C 0 C}\n        {C 1 C}\n        {C 2 C}\n        {C 3 C}\n        {C 4 C}\n        {C 5 C}\n    END\nEND\n* xyzfile 1 1 reactant.xyz \n</code></pre> <p>The optimisation of this constrained molecule is shown below:</p> Optimise Constrained Reactant <p>By constraining the benzyl atom in benzylamine, we have allowed the Cu atom to optimise to an ideal position while keeping the benzyl moiety in the same place. </p> <p>Note</p> <p>This is an optional step as we perform another geometric optimisation step in Step 2Bb.3. </p> <ul> <li>The reason for this contrained geometric optimisation step is because it makes it easier to view the structural change from our reactant to product structures and confirm both the reactant and product structures are in fact the structures we want to investigate the mechanistic step for. </li> <li>While this step is optional, it is highly recommended to perform this constrained optimisation job before performing a unconstrained geometric optimisation in Step 2Bb.3, as it makes it easier to check you are happy with your reactant and product structure before performing the NEB calculation. </li> </ul>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#step-2bb3-optimise-reactant-from-product-or-product-from-reactant-without-constraints","title":"Step 2Bb.3: Optimise Reactant from Product (or Product from Reactant) Without Constraints","text":"<p>Now that we have optimised the constrained reactant, we now repeat the optimisation process above, but without the constraints.</p> <ul> <li>We do this to make sure that this structure is absolutely in a local minimum.</li> <li>We do not expect the atoms in this molecule to move much, as the atoms we contrained were from an already optimised structure. </li> </ul> <p>The ORCA input file here as the same as in Step 2Bb.2, excluding the <code>Constraints</code> component. The <code>orca.inp</code> file for this example is given below (also located here): </p> Example orca.inp file used to perform a geometric optimisation calculation, excluding constrained atoms<pre><code>!B3LYP DEF2-TZVP D3BJ \n!OPT FREQ TightOPT TightSCF defgrid2\n%SCF\n    MaxIter 2000       # Here setting MaxIter to a very high number. Intended for systems that require sometimes 1000 iterations before converging (very rare).\n    DIISMaxEq 5        # Default value is 5. A value of 15-40 necessary for difficult systems.\n    directresetfreq 15 # Default value is 15. A value of 1 (very expensive) is sometimes required. A value between 1 and 15 may be more cost-effective.\nEND\n%CPCM EPSILON 6.02 REFRAC 1.3723 END\n%PAL NPROCS 32 END\n%maxcore 2000 # This indicates you want ORCA to use only 2GB per core maximum, so ORCA will use only 2GB*32=64GB of memory in total.\n* xyzfile 1 1 reactant_opt_constrained.xyz \n</code></pre> <p>In this example, the unconstrained optimisation calculation does not change the molecule much, which is what we ideally want. </p> <p>IMPORTANT</p> <p>If you find the atoms have changed position significantly compared to that in Step 2Bb.2, this is a problem.</p> <ul> <li>If this happens, you likely need to go back to Step 1 and make sure your original structure is geometrically optimised. </li> </ul>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#step-2bb4-double-check-the-reactant-and-product-structures","title":"Step 2Bb.4: Double-Check the Reactant and Product Structures","text":"<p>Before beginning the NEB calculation, it is a good idea to perform some double checks on your reactant and product structures. These checks have already been mentioned, but it is worth mentioning them again. There are:</p> <ul> <li>Make sure you are happy with your input reactant and product structures, and</li> <li>Make sure the atom index ordering between your input reactant and product structures are as expected (i.e. the same). </li> </ul> <p>To help perform these two checks, use the <code>ase gui</code> as follows:</p> <ol> <li> <p>Change directory into the folder containing the NEB calculation, as open both your optimised reactant and products in <code>ase gui</code>:</p> <pre><code># change directory into the folder containing your NEB calculation\ncd Examples/Step2Bb_4_Run_NEB_Calculation\n\n# View the reactant and product for the NEB calculation using ASE\nase gui reactant_opt_unconstrained.xyz product_opt.xyz\n</code></pre> </li> <li> <p>Next, in the ASE GUI click <code>View</code> -&gt; <code>Show Labels</code> -&gt; <code>Atom Index</code>. This will display the indices of the atoms in your reactant and product structures. </p> </li> <li> <p>Flick between the reactant and product structures and check that the structures of the reactant and product are: </p> <ul> <li>As expected (i.e. look like the reactant and product you want to understand the mechanistic step for).</li> <li>Have the same index ordering. </li> </ul> </li> </ol> <p>Example</p> <p>In the example below, </p> <ul> <li>The reactant and the product look like the mechanism we described in the first mechanistic step iun the Before You Begin step, and</li> <li>We see that the atom indices for each atom in the reactant and product align with each other, such that there is a natural way to get from reactants to products. </li> </ul> <p>So we are happy </p> <p> Optimised Reactant and Product for NEB Calculation. </p>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#step-2bb5-perform-the-climbing-image-nudge-elastic-band-ci-neb-calculation","title":"Step 2Bb.5: Perform the Climbing Image - Nudge Elastic Band (CI-NEB) Calculation","text":"<p>In an NEB, we trace a path from the reactant to the product. An optimisation is performed across all the images at the same time in order to try to find the transition step.</p> <p>In the <code>.inp</code> file, you want to include the following:</p> <pre><code>!NEB-CI TightSCF defgrid2\n</code></pre> <p>The tags here indicate you want to do the following: </p> <ul> <li><code>NEB-CI</code>: This keyword will perform a nudged-elastic band (NEB) calculation upon your system using the climbing image (CI) varient of the NEB algorithm. </li> <li><code>TightSCF</code>: Tells ORCA to tighten the convergence criteria for each electronic step. </li> <li><code>defgrid2</code>: Indicates how fine we want the intergration grid to be (This is the default).</li> </ul> <p>We also include the following NEB settings: </p> <pre><code>%NEB\n    NEB_END_XYZFILE \"product_opt.xyz\"\n    Nimages 100\n    Interpolation IDPP\n    Opt_Method LBFGS\nEND\n* XYZfile 1 1 reactant_opt_unconstrained.xyz\n</code></pre> <p>The tags here indicate you want to do the following in your NEB calculation: </p> <ul> <li><code>NEB_END_XYZFILE</code>: This is the reactant structure you want to use. Include this file in the same place as your ORCA <code>.inp</code> file.</li> <li><code>Nimages</code>: These are the number of images you want to include in the NEB calculation (not including the reactant and product image). <ul> <li>In this example, we will create 102 images from <code>reactant_opt_unconstrained.xyz</code> to <code>opt_product.xyz</code> (100 images in between but not including <code>reactant_opt_unconstrained.xyz</code> to <code>opt_product.xyz</code>)</li> </ul> </li> <li><code>Interpolation</code>: This is the interpolation scheme first used to create all the initial images. </li> <li><code>Opt_Method</code>: This is the optimisation method used. </li> </ul> <p>IMPORTANT</p> <p>It is important that the atom ordering in your reactant and product <code>xyz</code> files are the same, otherwise you will problems where atoms seems to move about in nosense ways. </p> NOTE 1 <p>In this example I have set <code>Nimages</code> to 100. I chose this to allow for some smoothness between images in the mechanistic step. However, you could set this to much less and everything would probably work. For example, 20 would probably also work fine. </p> <ul> <li>Try not to use too many images, as this can cause problems and also increases the amount of time required for the NEB to converge. </li> </ul> NOTE 2 <p>I use <code>LBFGS</code> in this example as the optimisation method. This is a very good algorithm, but it can be a bit loose and cause issues. In testing I tried the <code>FIRE</code> method, This worked also, but causes jitters which can lead to problems. </p> <ul> <li>The point is if you have convergence problems, try using another method for <code>Opt_Method</code>. </li> <li>See the ORCA manual 5.0.4: Page 784 for options for this setting. </li> </ul> <p>In this example, we are looking at how a Cu atom could insert itself into a C-H bond. The full <code>orca.inp</code> file is given below (also located here): </p> Example orca.inp file used to perform a NEB calculation<pre><code>!B3LYP DEF2-TZVP D3BJ\n!NEB-CI TightSCF defgrid2\n%SCF\n    MaxIter 2000       # Here setting MaxIter to a very high number. Intended for systems that require sometimes 1000 iterations before converging (very rare).\n    DIISMaxEq 5        # Default value is 5. A value of 15-40 necessary for difficult systems.\n    directresetfreq 15 # Default value is 15. A value of 1 (very expensive) is sometimes required. A value between 1 and 15 may be more cost-effective.\nEND\n%CPCM EPSILON 6.02 REFRAC 1.3723 END\n%PAL NPROCS 32 END\n%maxcore 2000 # This indicates you want ORCA to use only 2GB per core maximum, so ORCA will use only 2GB*32=64GB of memory in total.\n%NEB\n    NEB_END_XYZFILE \"product_opt.xyz\"\n    Nimages 100\n    Interpolation IDPP\n    Opt_Method LBFGS\nEND\n* XYZfile 1 1 reactant_opt_unconstrained.xyz\n</code></pre>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#outputs-from-orca","title":"Outputs from ORCA","text":"<p>ORCA will create a number of files, as well as the <code>output.out</code> file. These are the important ones to look at for NEB calculations: </p> <ul> <li><code>orca_initial_path_trj.xyz</code>: This is the initial NEB path that you want to investigate. </li> <li><code>orca_MEP_trj.xyz</code>: This is the NEB trajectory for the mechanism.</li> <li><code>orca_NEB-TS_converged.xyz</code>: This is the transition state that was obtained from this NEB calculation. </li> </ul>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#important-things-to-do-while-the-neb-calculation-is-running","title":"IMPORTANT: Things to do while the NEB calculation is running","text":"<p>Once ORCA has begun running the NEB calculation, there are two things that you should do:</p> <ol> <li>Check the <code>orca_initial_path_trj.xyz</code> file.</li> <li>Check the NEB calculation daily.</li> </ol> <p>Below is a description of these two checks:</p> <p>1. Check the <code>orca_initial_path_trj.xyz</code> file</p> <p>Once ORCA begins, the first step in the NEB calculation is to create all the initial images connecting the reactant and the product using an interpolation scheme. </p> <ul> <li>ORCA will create a file called <code>orca_initial_path_trj.xyz</code>. This file gives an idea of the initial NEB path that ORCA will begin investigating. </li> <li>Check this file in <code>ase gui</code> and see that this initial mechanistic pathway look somewhat sensible.</li> </ul> <pre><code># change directory into the folder containing your NEB calculation\ncd Examples/Step2Bb_4_Run_NEB_Calculation\n\n# View the reactant and product for the NEB calculation using ASE\nase gui orca_initial_path_trj.xyz\n</code></pre> Example <p>For this example, the <code>orca_initial_path_trj.xyz</code> file looks like this:</p> <p> Check the initial interpolation path given in the orca_initial_path_trj.xyz file </p> <p>In this example, atom 14 (H) floats away in free space from atom 11 (C), and there is a bit of time before atom 14 bonds to atom 17 (Cu). </p> <ul> <li>This indicates there may be a problem and the NEB calculation might have trouble. </li> <li>However, NEB calculations are designed to change the mechanistic path to account for this and found a more likely mechanistric pathway, so this is not a horrible initial NEB pathway. </li> </ul> <p>I would be happy with this calculation to proceed as it is, but it would be wise to check this calculation daily as it runs. </p> <p>Tip</p> <p>The general rule is: The simplier you can make the initial NEB pathway, the more likely the NEB calculation will converge. </p> <p>2. Check the NEB calculation daily</p> <p>NEB calculations, like any ORCA or DFT calculation, have the potential to go in weird directions that makes convergence unlikely. This is particularly the case for NEB calculations. For this reason, it is important to do the following checks on a daily basis: </p> <ol> <li> <p>Check the <code>orca_MEP_trj.xyz</code> file. This file describes the current reaction pathway as calculated by NEB. </p> <ul> <li>View this file by running <code>ase gui orca_MEP_trj.xyz</code> in the terminal. </li> <li>Hopefully the NEB path given in this file look better and better as ORCA proceeds. </li> <li>The main thing is to check that the NEB path given by <code>orca_MEP_trj.xyz</code> is still sensible by your chemical intuition. </li> </ul> </li> <li> <p>Check the <code>output.log</code> file to make sure everything is running smoothly.</p> <ul> <li>The best way to check the <code>output.log</code> file is to scroll to the bottom of the <code>output.log</code> file. </li> <li>If there are any problems, it may come up in the <code>output.log</code> file.</li> <li>If you are using slurm, you should also look at the slurm output and error files to see if there are any issues reported there. </li> </ul> </li> <li> <p>Check how the energy profile of the NEB calculation has changed by running the <code>viewORCA neb_snap</code> command in your terminal. </p> <ul> <li>This command will present the energy profile snapshots of all the NEB iterations that ORCA has performed thus far. </li> <li>Run this command by changing directory to the folder containing your NEB run in the terminal, and then running the <code>viewORCA neb_snap</code> command.</li> </ul> <pre><code># cd into your optimisation folder\ncd ORCA_Mechanism_Procedure/Examples/Step2_Find_TS/NEB\n\n# View the NEB calculation \nviewORCA neb_snap\n</code></pre> <ul> <li> <p><code>viewORCA neb_snap</code> will create two files. These are: </p> <ul> <li><code>orca_NEB_optimization.png</code>: This file contains the plots of all the NEB optimisation iterations that have been performed so far.</li> <li><code>orca_NEB_last_iteration.png</code>: This is the plot of the last NEB optimisation iteration.</li> </ul> </li> </ul> Example <p>Examples of the <code>orca_NEB_optimization.png</code> and <code>orca_NEB_last_iteration.png</code> files are shown below:</p> <p> Energy profile of each NEB optimisation iteration performed by ORCA. This is given by the 'orca_NEB_optimization.png' file. </p> <p> Energy profile of the last NEB optimisation iteration, as performed by ORCA. This is given by the 'orca_NEB_last_iteration.png' file. </p> </li> </ol>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#how-to-analyse-the-output-files-after-the-neb-calculation-has-finished","title":"How to analyse the output files after the NEB calculation has finished","text":"<p>Once ORCA has finished performing the NEB calculation, we will want to visualise the NEB. You can visualize how ORCA has performed the mechanistic step by typing <code>viewORCA neb</code> into the terminal. </p> <pre><code># cd into your optimisation folder\ncd ORCA_Mechanism_Procedure/Examples/Step2_Find_TS/NEB\n\n# View the NEB calculation \nviewORCA neb\n</code></pre> <p>You will get a GUI that shows you the following NEB pathway:</p> NEB Images <p>The energy profile for this example is given below:</p> NEB Energy Profile <p>You can see that a transition state is given by ORCA as the <code>orca_NEB-CI_converged.xyz</code> file. This is what the given transition state looks like in this example:</p> Transition State as obtained by the CI-NEB calculation."},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#other-comments-about-nebs","title":"Other comments about NEBs","text":""},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#comments-about-the-opt_method-settings","title":"Comments about the <code>Opt_Method</code> settings","text":"<p>The <code>LBFGS</code> is a common optimisation algorithm used in geometric optimisations. The note from ORCA is that The L-BFGS is more aggressive and efficient, but also more error-prone. Because of this, it is a common strategy to change the optimisation algorithm used to help the NEB calculation. </p> <ul> <li>In testing this proceedure I also used the <code>FIRE</code> which is also a good algorithm. </li> <li>However in this case, the <code>FIRE</code> algorithm was less able to scout the NEB. </li> <li>Here is the NEB for the same NEB calculation shown above using the <code>FIRE</code> method.</li> </ul> <p>This is the NEB path that I got from the NEB calculation using the <code>FIRE</code> algorithm: </p> NEB Images using the FIRE algorithm <p>The energy profile for this example is given below:</p> NEB Energy Profile using the FIRE algorithm <p>You can see from the NEB path and the energy profile that its a bit jittery, but overall the NEB did work as we found a good transition state:</p> NEB Energy Profile <p>At the end of the day, it doesnt matter how \"well\" the NEB calculation did, it only depends if we find a sufficient transition state that we can further optimise in Step 3: Optimise the Transition State. So I would say I would be happy with how this NEB ran, and would have continued to Step 3. </p>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#other-information-about-performing-nebs-in-orca","title":"Other Information about performing NEBs in ORCA","text":"<p>The following links have good information for performing NEBs in ORCA:</p> <ul> <li>https://www.orcasoftware.de/tutorials_orca/react/nebts.html: Nice article from the developers about how to perform an NEB in ORCA.</li> <li>https://sites.google.com/site/orcainputlibrary/geometry-optimizations/tutorial-neb-calculations: Nice extra information for performing and analysising NEBs.</li> <li>https://github.com/via9a/neb_visualize: Contain another program for analysing how the NEB optimised. This program is really good for figuring out how the NEB optimised itself, very helpful!</li> </ul>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#troubleshooting-the-nudged-elastic-band-neb-calculation","title":"Troubleshooting the Nudged Elastic Band (<code>NEB</code>) Calculation","text":"<p>Here are some troubleshooting tips for performing this optimisation step.</p> <p>Also look at the following websites for help:</p> <ul> <li>https://github.com/geoffreyweal/ORCA_Mechanism_Procedure?tab=readme-ov-file#troubleshooting</li> <li>https://sites.google.com/site/orcainputlibrary/scf-convergence-issues (apart of https://sites.google.com/site/orcainputlibrary)</li> </ul> <p>No troubleshooting issues have been found yet. </p> <p>Info</p> <p>If you have any issues about this step, raise a <code>New issue</code> at the Issues section by clicking here.</p>"},{"location":"Step_4_Validate_TS/index.html","title":"Step 4: Validate the Transition State","text":"<p>Now that we have a transition state, we need to confirm that this is the transition state for this mechanistic step. </p> <ul> <li>We need to check this because the transition state we have obtained may not connect the reactant to the product. </li> </ul> <p>We will use the intrinsic reaction coordinate (IRC) method to check this is the transition state we are looking for. This method works by:</p> <ol> <li>Nudging the transition state slightly along each direction of the negative frequency eigenvector. This gives two nudged versions of the transition state, called the <code>forward</code> and <code>backward</code> states. Then, </li> <li>Perform a geometric optimisation upon both the <code>forward</code> and <code>backward</code> states. These two calculations will optimise into a local minimum.</li> <li>If everything goes well, one of the optimised <code>forward</code> and <code>backward</code> states will resemble the <code>reactant</code>, and the other will resemble the <code>product</code>. </li> </ol> Mechanistic step on Potential Energy Surface (Image adapted from J. A. Keith, V. Vassilev-Galindo, B. Cheng, S. Chmiela, M. Gastegger, K.-R. M\u00fcller, and A. Tkatchenko; Chem. Rev. 2021, 121, 16, 9816\u20139872). <p>Note</p> <p>The x and y axis given as R<sub>1</sub> and R<sub>2</sub> in the image above just indicate there is a change in spatial coordinates of the atoms in your molecule going from the reactant to the product. </p>"},{"location":"Step_4_Validate_TS/index.html#how-to-validate-the-transition-state","title":"How to Validate the Transition State","text":"<p>There are two main substeps that will be performed here:</p> <ol> <li>Perform the intrinsic reaction coordinate (IRC) method to obtain the forward and backwards states from the transition state.</li> <li>Geometrically optimise the forward and backwards states obtained from the IRC method, and check that they resemble the reactant and product obtained in Step 1. </li> </ol>"},{"location":"Step_4_Validate_TS/Step_4A_The_IRC_Method.html","title":"Step 4A: Validate the Transition State using the Intrinsic Reaction Coordinate (IRC) Method","text":"<p>Tip</p> <p>Download the template folder for this step by clicking the button below and work on the files in the template folder as you read through this tutorial. </p> <p>Download Templates.zip </p> <p>To perform the IRC method, we want to include the following in the <code>orca.inp</code> file:</p> <pre><code>!IRC TightSCF defgrid2\n</code></pre> <p>We also want to include the following options for the IRC method:</p> <pre><code>%IRC\n    MaxIter 2000\n    InitHess calc_numfreq\n    Direction both\n    TolMAXG 2.e-3  # Max gradient (a.u.). Currently set to values equivalent to LooseOpt.\n    TolRMSG 5.e-4  # RMS gradient (a.u.). Currently set to values equivalent to LooseOpt.\n    PrintLevel 1\nEND\n</code></pre> <p>Notes about the <code>TolMAXG</code> and <code>TolRMSG</code> keywords</p> <ol> <li>The <code>TightOPT</code> keyword (and other geometric convergence like <code>NormalOPT</code> and <code>LooseOPT</code>) does not work with <code>IRC</code>. Instead, we include the <code>TolMAXG</code> and <code>TolRMSG</code> keywords in the <code>orca.inp</code> file. </li> <li>It is recommended to set <code>TolMAXG</code> and <code>TolRMSG</code> to values equivalent to the <code>LooseOPT</code> keyword. This is because IRC can take a very long time to run to you use tighter convergence criteria. We will check the outputs from the IRC method with the <code>TightOPT</code> keyword in Step 4B. </li> <li> <p>While we are using the default setting <code>TolMAXG</code> and <code>TolRMSG</code> (set to that of <code>LooseOPT</code>), you can change this. If you want to tighten the geometric convergence criteria for the IRC method, see the following below. However, for this procedure it is recommended to keep the <code>LooseOPT</code> settings for <code>TolMAXG</code> and <code>TolRMSG</code>, and use tighter convergence settings in Step 4B. </p> <pre><code># TolMAXG and TolRMSG settings for:\n\nLooseOpt\nTolMAXG 2.e-3  # Max gradient (a.u.). Currently set to values equivalent to LooseOpt.\nTolRMSG 5.e-4  # RMS gradient (a.u.). Currently set to values equivalent to LooseOpt.\n\nNormalOpt\nTolMAXG 3.e-4  # Max gradient (a.u.). Currently set to values equivalent to NormalOpt.\nTolRMSG 1.e-4  # RMS gradient (a.u.). Currently set to values equivalent to NormalOpt.\n\nTightOPT\nTolMAXG 1.e-4  # Max gradient (a.u.). Currently set to values equivalent to TightOPT.\nTolRMSG 3.e-5  # RMS gradient (a.u.). Currently set to values equivalent to TightOPT.\n</code></pre> </li> </ol> <p>An example of the complete <code>orca.inp</code> file for running a IRC calculation in ORCA is given below (also located here): </p> Example of a ORCA input file for a IRC calculation<pre><code>!B3LYP DEF2-TZVP D3BJ\n!IRC TightSCF defgrid2\n%SCF\n    MaxIter 2000       # Here setting MaxIter to a very high number. Intended for systems that require sometimes 1000 iterations before converging (very rare).\n    DIISMaxEq 5        # Default value is 5. A value of 15-40 necessary for difficult systems.\n    directresetfreq 15 # Default value is 15. A value of 1 (very expensive) is sometimes required. A value between 1 and 15 may be more cost-effective.\nEND\n%CPCM EPSILON 6.02 REFRAC 1.3723 END\n%PAL NPROCS 32 END\n%maxcore 2000\n%IRC\n    MaxIter 2000\n    InitHess calc_numfreq\n    Direction both\n    TolMAXG 2.e-3  # Max gradient (a.u.). Currently set to values equivalent to LooseOpt.\n    TolRMSG 5.e-4  # RMS gradient (a.u.). Currently set to values equivalent to LooseOpt.\n    PrintLevel 1\nEND\n* xyzfile 1 1 TS.xyz\n</code></pre>"},{"location":"Step_4_Validate_TS/Step_4A_The_IRC_Method.html#outputs-from-orca","title":"Outputs from ORCA","text":"<p>ORCA will create a number of files. These are the important ones to looks at for the IRC method:</p> <ul> <li><code>output.out</code>: We will want to look at this file to make sure the IRC method has not run into any problems. </li> <li><code>orca_IRC_F_trj.xyz</code>: This is the geometric optimisation steps performed for the forward step</li> <li><code>orca_IRC_B_trj.xyz</code>: This is the geometric optimisation steps performed for the backwards step</li> <li><code>orca_IRC_Full_trj.xyz</code>: This is the geometric optimisation steps performed for the full IRC method. This include the steps from the <code>orca_IRC_B_trj.xyz</code> and <code>orca_IRC_F_trj.xyz</code> files. </li> </ul> <p>Note</p> <p>You will find that the output from the <code>Forward</code> step maybe either the reactant or the product. So don't worry if the <code>Forward</code> step gives you your reactant. This only means that in that case your <code>Backward</code> step should be your product. </p> <p>Once ORCA has finished, you want to do the following checks:</p>"},{"location":"Step_4_Validate_TS/Step_4A_The_IRC_Method.html#check-1-make-sure-the-outputout-file-indicates-the-calculation-finished-successfully","title":"Check 1: Make sure the <code>output.out</code> file indicates the calculation finished successfully","text":"<p>Look at the end of the <code>output.out</code> file and makes sure there is some sort of message that says that ORCA finished successfully, like that below:</p> Successful ORCA calculation message expected at the end of the ORCA output file<pre><code>****ORCA TERMINATED NORMALLY****\n</code></pre> <p>Also, make sure you see the following <code>HURRAY</code> messages for the forward and reverse components of the calculation</p> Example of HURRAY message indicating the IRC calculation completed successfully<pre><code>***********************HURRAY********************\n***            THE IRC HAS CONVERGED          ***\n*************************************************\n</code></pre> <p>See an example of this below:</p> Example of IRC optimisation calculation text from the ORCA output file<pre><code>         *************************************************************\n         *                          FORWARD IRC                      *\n         *************************************************************\n\nIteration    E(Eh)      dE(kcal/mol)  max(|G|)   RMS(G) \nConvergence thresholds                0.002000  0.000500            \n    0     -1967.123694   -0.987880    0.009347  0.001949\n    1     -1967.125262   -1.971692    0.010633  0.002266\n    2     -1967.125852   -2.342362    0.009561  0.002027\n    3     -1967.126824   -2.951750    0.009004  0.001925\n    4     -1967.127879   -3.613810    0.009124  0.001951\n    5     -1967.128956   -4.289687    0.009018  0.001951\n    6     -1967.130017   -4.955706    0.008720  0.001916\n    7     -1967.131043   -5.599642    0.008250  0.001895\n    8     -1967.132027   -6.216796    0.007772  0.001775\n    9     -1967.132967   -6.806843    0.007140  0.001741\n   10     -1967.133844   -7.356805    0.006597  0.001594\n   11     -1967.134673   -7.877617    0.005964  0.001505\n   12     -1967.135396   -8.330929    0.005465  0.001403\n   13     -1967.136183   -8.824805    0.005304  0.001313\n   14     -1967.136867   -9.254130    0.005093  0.001211\n   15     -1967.137494   -9.647347    0.004860  0.001251\n   16     -1967.138020   -9.977561    0.004589  0.001172\n   17     -1967.138244   -10.118093    0.004476  0.001128\n   18     -1967.138493   -10.274561    0.004343  0.000969\n   19     -1967.138760   -10.441927    0.004194  0.000937\n   20     -1967.138998   -10.591222    0.004041  0.000929\n   21     -1967.139225   -10.734009    0.003895  0.000876\n   22     -1967.139452   -10.875971    0.003749  0.000835\n   23     -1967.139718   -11.043042    0.003608  0.000801\n   24     -1967.139845   -11.122736    0.003467  0.000761\n   25     -1967.140080   -11.270521    0.003330  0.000731\n   26     -1967.140277   -11.393680    0.003197  0.000702\n   27     -1967.140464   -11.511368    0.003070  0.000674\n   28     -1967.140637   -11.619494    0.002943  0.000741\n   29     -1967.140715   -11.668661    0.002891  0.000664\n   30     -1967.140798   -11.720524    0.002835  0.000631\n   31     -1967.140860   -11.759730    0.002776  0.000609\n   32     -1967.140961   -11.823302    0.002717  0.000597\n   33     -1967.141042   -11.873813    0.002660  0.000598\n   34     -1967.141120   -11.922679    0.002603  0.000572\n   35     -1967.141197   -11.971354    0.002547  0.000604\n   36     -1967.141268   -12.015933    0.002493  0.000551\n   37     -1967.141345   -12.064045    0.002437  0.000559\n   38     -1967.141415   -12.107775    0.002382  0.000528\n   39     -1967.141487   -12.152988    0.002325  0.000535\n   40     -1967.141553   -12.194724    0.002273  0.000507\n   41     -1967.141623   -12.238554    0.002219  0.000504\n   42     -1967.141688   -12.279047    0.002162  0.000485\n   43     -1967.141757   -12.322336    0.002107  0.000474\n   44     -1967.141804   -12.352192    0.002052  0.000620\n   45     -1967.141837   -12.372873    0.002037  0.000479\n   46     -1967.141883   -12.401622    0.002011  0.000491\n   47     -1967.141897   -12.410438    0.001987  0.000502\n   48     -1967.141921   -12.425304    0.001963  0.000447\n\n                      ***********************HURRAY********************\n                      ***            THE IRC HAS CONVERGED          ***\n                      *************************************************\n\n\n         *************************************************************\n         *                          BACKWARD IRC                     *\n         *************************************************************\n\nIteration    E(Eh)      dE(kcal/mol)  max(|G|)   RMS(G) \nConvergence thresholds                0.002000  0.000500            \n    0     -1967.124432   -1.450797    0.013548  0.003054\n    1     -1967.128179   -3.802362    0.019874  0.004412\n    2     -1967.133463   -7.118203    0.025990  0.005520\n    3     -1967.139815   -11.103897    0.028442  0.006038\n    4     -1967.146176   -15.095469    0.025081  0.005721\n    5     -1967.151785   -18.615266    0.021519  0.004885\n    6     -1967.156345   -21.476904    0.019615  0.004011\n    7     -1967.160267   -23.937845    0.017255  0.003408\n    8     -1967.163664   -26.069666    0.014997  0.002976\n    9     -1967.166694   -27.970753    0.013013  0.002697\n   10     -1967.169479   -29.718182    0.011530  0.002474\n   11     -1967.172077   -31.348800    0.010293  0.002306\n   12     -1967.174459   -32.843560    0.009384  0.002123\n   13     -1967.176652   -34.219491    0.008341  0.001943\n   14     -1967.178609   -35.447602    0.007524  0.001794\n   15     -1967.180284   -36.498332    0.006505  0.001811\n   16     -1967.180799   -36.822042    0.006206  0.001874\n   17     -1967.181037   -36.970895    0.006081  0.001495\n   18     -1967.181400   -37.198822    0.005876  0.001356\n   19     -1967.181750   -37.418312    0.005669  0.001312\n   20     -1967.182089   -37.631256    0.005467  0.001242\n   21     -1967.182416   -37.836382    0.005276  0.001192\n   22     -1967.182752   -38.047361    0.005091  0.001133\n   23     -1967.183039   -38.227080    0.004909  0.001083\n   24     -1967.183346   -38.420263    0.004729  0.001053\n   25     -1967.183594   -38.575570    0.004544  0.000989\n   26     -1967.183880   -38.755051    0.004352  0.000934\n   27     -1967.184122   -38.907028    0.004147  0.000882\n   28     -1967.184278   -39.004650    0.005538  0.001872\n   29     -1967.184371   -39.063508    0.003907  0.001106\n   30     -1967.184429   -39.099643    0.003868  0.001106\n   31     -1967.184437   -39.104382    0.003827  0.001095\n   32     -1967.184495   -39.141192    0.003788  0.000806\n   33     -1967.184532   -39.164363    0.003735  0.000827\n   34     -1967.184582   -39.195809    0.003710  0.000779\n   35     -1967.184629   -39.225129    0.003657  0.000811\n   36     -1967.184679   -39.256314    0.003605  0.000771\n   37     -1967.184730   -39.288669    0.003550  0.000749\n   38     -1967.184792   -39.327326    0.003497  0.000767\n   39     -1967.184820   -39.344886    0.003443  0.000736\n   40     -1967.184882   -39.383827    0.003390  0.000791\n   41     -1967.184915   -39.404885    0.003338  0.000696\n   42     -1967.184964   -39.435277    0.003282  0.000702\n   43     -1967.184881   -39.383478    0.003257  0.000682\n   44     -1967.185025   -39.473599    0.003205  0.000675\n   45     -1967.185078   -39.507012    0.003149  0.000757\n   46     -1967.185116   -39.530892    0.003102  0.000636\n   47     -1967.185162   -39.559376    0.003055  0.000664\n   48     -1967.185193   -39.579049    0.003004  0.000683\n   49     -1967.185217   -39.594308    0.002952  0.000614\n   50     -1967.185167   -39.562848    0.002896  0.000602\n   51     -1967.185294   -39.642716    0.002843  0.000594\n   52     -1967.185245   -39.611372    0.002787  0.000572\n   53     -1967.185371   -39.690597    0.002733  0.000555\n   54     -1967.185407   -39.713298    0.002680  0.000583\n   55     -1967.185427   -39.725635    0.002628  0.000550\n   56     -1967.185455   -39.743316    0.002605  0.000686\n   57     -1967.185485   -39.762253    0.002559  0.000607\n   58     -1967.185523   -39.786160    0.002515  0.000571\n   59     -1967.185524   -39.786625    0.002463  0.000683\n   60     -1967.185589   -39.827267    0.002427  0.000794\n   61     -1967.185606   -39.838302    0.002392  0.000664\n   62     -1967.185624   -39.849721    0.002353  0.000478\n   63     -1967.185637   -39.857889    0.002302  0.000504\n   64     -1967.185667   -39.876769    0.002253  0.000504\n   65     -1967.185727   -39.914169    0.002210  0.000641\n   66     -1967.185718   -39.908741    0.002189  0.000446\n   67     -1967.185747   -39.926823    0.002141  0.000523\n   68     -1967.185769   -39.940362    0.002100  0.000528\n   69     -1967.185789   -39.952710    0.002061  0.000608\n   70     -1967.185870   -40.003626    0.002035  0.000817\n   71     -1967.185828   -39.977567    0.002012  0.000472\n   72     -1967.185827   -39.977023    0.001971  0.000413\n\n                      ***********************HURRAY********************\n                      ***            THE IRC HAS CONVERGED          ***\n                      *************************************************\n</code></pre>"},{"location":"Step_4_Validate_TS/Step_4A_The_IRC_Method.html#check-2-make-sure-that-the-energies-of-each-geometric-optimisation-step-is-less-than-the-transition-step-from-the-outputout-file","title":"Check 2: Make sure that the energies of each geometric optimisation step is less than the transition step from the <code>output.out</code> file","text":"<p>We want to make sure that the energy of our transition state is in fact lower than all points along the energy profile. This is because:</p> <ul> <li>The IRC method works by initially pushing the molecule down the saddle of the potential energy surface towards the reactant and product minima, so the energy should have decreased from transition state in the forward and backwards directions. </li> </ul> <p>To do this, you want to look at the <code>IRC PATH SUMMARY</code> in your output file and make sure your transition state (<code>TS</code>) is the highest energy step in the IRC path. </p> <p>The transition state should be the number of the final <code>Convergence Iteration</code> from the backwards step, plus 2. In this example, our <code>BACKWARD IRC</code> process required 72 geometry optimisation steps, so we expect our transition state to be at step 74 in the <code>IRC PATH SUMMARY</code> table. </p> <p>Below show an example of this from <code>Examples/Step4_Validate_TS/Step4A_IRC/output.log</code>. You can see that the transition step occurs at step 74, as expected. We also see that the energy of the transition state is the largest for all steps. </p> Example of IRC PATH SUMMARY text from the ORCA output file<pre><code>---------------------------------------------------------------\n                       IRC PATH SUMMARY              \n---------------------------------------------------------------\nAll gradients are in Eh/Bohr.\n\nStep        E(Eh)      dE(kcal/mol)  max(|G|)   RMS(G) \n   1     -1967.185827   -39.977023    0.001971  0.000413\n   2     -1967.185828   -39.977567    0.002012  0.000472\n   3     -1967.185870   -40.003626    0.002035  0.000817\n   4     -1967.185789   -39.952710    0.002061  0.000608\n   5     -1967.185769   -39.940362    0.002100  0.000528\n   6     -1967.185747   -39.926823    0.002141  0.000523\n   7     -1967.185718   -39.908741    0.002189  0.000446\n   8     -1967.185727   -39.914169    0.002210  0.000641\n   9     -1967.185667   -39.876769    0.002253  0.000504\n  10     -1967.185637   -39.857889    0.002302  0.000504\n  11     -1967.185624   -39.849721    0.002353  0.000478\n  12     -1967.185606   -39.838302    0.002392  0.000664\n  13     -1967.185589   -39.827267    0.002427  0.000794\n  14     -1967.185524   -39.786625    0.002463  0.000683\n  15     -1967.185523   -39.786160    0.002515  0.000571\n  16     -1967.185485   -39.762253    0.002559  0.000607\n  17     -1967.185455   -39.743316    0.002605  0.000686\n  18     -1967.185427   -39.725635    0.002628  0.000550\n  19     -1967.185407   -39.713298    0.002680  0.000583\n  20     -1967.185371   -39.690597    0.002733  0.000555\n  21     -1967.185245   -39.611372    0.002787  0.000572\n  22     -1967.185294   -39.642716    0.002843  0.000594\n  23     -1967.185167   -39.562848    0.002896  0.000602\n  24     -1967.185217   -39.594308    0.002952  0.000614\n  25     -1967.185193   -39.579049    0.003004  0.000683\n  26     -1967.185162   -39.559376    0.003055  0.000664\n  27     -1967.185116   -39.530892    0.003102  0.000636\n  28     -1967.185078   -39.507012    0.003149  0.000757\n  29     -1967.185025   -39.473599    0.003205  0.000675\n  30     -1967.184881   -39.383478    0.003257  0.000682\n  31     -1967.184964   -39.435277    0.003282  0.000702\n  32     -1967.184915   -39.404885    0.003338  0.000696\n  33     -1967.184882   -39.383827    0.003390  0.000791\n  34     -1967.184820   -39.344886    0.003443  0.000736\n  35     -1967.184792   -39.327326    0.003497  0.000767\n  36     -1967.184730   -39.288669    0.003550  0.000749\n  37     -1967.184679   -39.256314    0.003605  0.000771\n  38     -1967.184629   -39.225129    0.003657  0.000811\n  39     -1967.184582   -39.195809    0.003710  0.000779\n  40     -1967.184532   -39.164363    0.003735  0.000827\n  41     -1967.184495   -39.141192    0.003788  0.000806\n  42     -1967.184437   -39.104382    0.003827  0.001095\n  43     -1967.184429   -39.099643    0.003868  0.001106\n  44     -1967.184371   -39.063508    0.003907  0.001106\n  45     -1967.184278   -39.004650    0.005538  0.001872\n  46     -1967.184122   -38.907028    0.004147  0.000882\n  47     -1967.183880   -38.755051    0.004352  0.000934\n  48     -1967.183594   -38.575570    0.004544  0.000989\n  49     -1967.183346   -38.420263    0.004729  0.001053\n  50     -1967.183039   -38.227080    0.004909  0.001083\n  51     -1967.182752   -38.047361    0.005091  0.001133\n  52     -1967.182416   -37.836382    0.005276  0.001192\n  53     -1967.182089   -37.631256    0.005467  0.001242\n  54     -1967.181750   -37.418312    0.005669  0.001312\n  55     -1967.181400   -37.198822    0.005876  0.001356\n  56     -1967.181037   -36.970895    0.006081  0.001495\n  57     -1967.180799   -36.822042    0.006206  0.001874\n  58     -1967.180284   -36.498332    0.006505  0.001811\n  59     -1967.178609   -35.447602    0.007524  0.001794\n  60     -1967.176652   -34.219491    0.008341  0.001943\n  61     -1967.174459   -32.843560    0.009384  0.002123\n  62     -1967.172077   -31.348800    0.010293  0.002306\n  63     -1967.169479   -29.718182    0.011530  0.002474\n  64     -1967.166694   -27.970753    0.013013  0.002697\n  65     -1967.163664   -26.069666    0.014997  0.002976\n  66     -1967.160267   -23.937845    0.017255  0.003408\n  67     -1967.156345   -21.476904    0.019615  0.004011\n  68     -1967.151785   -18.615266    0.021519  0.004885\n  69     -1967.146176   -15.095469    0.025081  0.005721\n  70     -1967.139815   -11.103897    0.028442  0.006038\n  71     -1967.133463   -7.118203    0.025990  0.005520\n  72     -1967.128179   -3.802362    0.019874  0.004412\n  73     -1967.124432   -1.450797    0.013548  0.003054\n  74     -1967.122120    0.000000    0.000008  0.000004 &lt;= TS\n  75     -1967.123694   -0.987880    0.009347  0.001949\n  76     -1967.125262   -1.971692    0.010633  0.002266\n  77     -1967.125852   -2.342362    0.009561  0.002027\n  78     -1967.126824   -2.951750    0.009004  0.001925\n  79     -1967.127879   -3.613810    0.009124  0.001951\n  80     -1967.128956   -4.289687    0.009018  0.001951\n  81     -1967.130017   -4.955706    0.008720  0.001916\n  82     -1967.131043   -5.599642    0.008250  0.001895\n  83     -1967.132027   -6.216796    0.007772  0.001775\n  84     -1967.132967   -6.806843    0.007140  0.001741\n  85     -1967.133844   -7.356805    0.006597  0.001594\n  86     -1967.134673   -7.877617    0.005964  0.001505\n  87     -1967.135396   -8.330929    0.005465  0.001403\n  88     -1967.136183   -8.824805    0.005304  0.001313\n  89     -1967.136867   -9.254130    0.005093  0.001211\n  90     -1967.137494   -9.647347    0.004860  0.001251\n  91     -1967.138020   -9.977561    0.004589  0.001172\n  92     -1967.138244   -10.118093    0.004476  0.001128\n  93     -1967.138493   -10.274561    0.004343  0.000969\n  94     -1967.138760   -10.441927    0.004194  0.000937\n  95     -1967.138998   -10.591222    0.004041  0.000929\n  96     -1967.139225   -10.734009    0.003895  0.000876\n  97     -1967.139452   -10.875971    0.003749  0.000835\n  98     -1967.139718   -11.043042    0.003608  0.000801\n  99     -1967.139845   -11.122736    0.003467  0.000761\n 100     -1967.140080   -11.270521    0.003330  0.000731\n 101     -1967.140277   -11.393680    0.003197  0.000702\n 102     -1967.140464   -11.511368    0.003070  0.000674\n 103     -1967.140637   -11.619494    0.002943  0.000741\n 104     -1967.140715   -11.668661    0.002891  0.000664\n 105     -1967.140798   -11.720524    0.002835  0.000631\n 106     -1967.140860   -11.759730    0.002776  0.000609\n 107     -1967.140961   -11.823302    0.002717  0.000597\n 108     -1967.141042   -11.873813    0.002660  0.000598\n 109     -1967.141120   -11.922679    0.002603  0.000572\n 110     -1967.141197   -11.971354    0.002547  0.000604\n 111     -1967.141268   -12.015933    0.002493  0.000551\n 112     -1967.141345   -12.064045    0.002437  0.000559\n 113     -1967.141415   -12.107775    0.002382  0.000528\n 114     -1967.141487   -12.152988    0.002325  0.000535\n 115     -1967.141553   -12.194724    0.002273  0.000507\n 116     -1967.141623   -12.238554    0.002219  0.000504\n 117     -1967.141688   -12.279047    0.002162  0.000485\n 118     -1967.141757   -12.322336    0.002107  0.000474\n 119     -1967.141804   -12.352192    0.002052  0.000620\n 120     -1967.141837   -12.372873    0.002037  0.000479\n 121     -1967.141883   -12.401622    0.002011  0.000491\n 122     -1967.141897   -12.410438    0.001987  0.000502\n 123     -1967.141921   -12.425304    0.001963  0.000447\n</code></pre>"},{"location":"Step_4_Validate_TS/Step_4A_The_IRC_Method.html#check-3-optional-make-sure-that-the-energies-of-each-geometric-optimisation-step-is-less-than-the-transition-step-using-the-vieworca-irc-program","title":"Check 3 (Optional): Make sure that the energies of each geometric optimisation step is less than the transition step using the <code>viewORCA irc</code> program","text":"<p>We can also repeat Check 2 by looking at the energy profile from the <code>orca_IRC_Full_trj.xyz</code> file so that we can see how the IRC ran visually. This is a good idea as an extra check. </p> <p>To do this, we want to use the <code>viewORCA irc</code> program by performing the following steps:</p> <ol> <li>Open a terminal.</li> <li><code>cd</code> into the folder with the <code>orca_IRC_Full_trj.xyz</code> file.</li> <li>Run the <code>viewORCA irc</code> program in the terminal.</li> </ol> <p>For example:</p> <pre><code># cd into the folder with the ``orca_IRC_Full_trj.xyz`` file\ncd ORCA_Mechanism_Procedure/Examples/Step4_Validate_TS/Step4A_IRC\n\n# Run the ``viewORCA irc`` program in the terminal\nviewORCA irc\n</code></pre> <p>Note</p> <p><code>viewORCA irc</code> will also create a xyz file called <code>IRC_images.xyz</code> that you can copy and view on your own computer. </p> <ul> <li>If you just want to create the <code>IRC_images.xyz</code> file, type into the terminal <code>viewORCA irc --view False</code> (which will create the <code>IRC_images.xyz</code> file without creating a <code>ase gui</code> window). </li> </ul> <p>You will get a GUI that shows you the following IRC pathway:</p> GIF of the IRC calculation <p>The energy profile for this example is given below:</p> Energy Profile of the IRC calculation <p>If you put the cursor over the energy profile, you will see in this example that the maximum peak occurs at <code>x=36</code>. Because ASE starts at <code>0</code> rather than <code>1</code>, <code>x=73</code> here means <code>step 74</code>, so we are happy. </p>"},{"location":"Step_4_Validate_TS/Step_4A_The_IRC_Method.html#troubleshooting-intrinsic-reaction-coordinate-irc-calculations","title":"Troubleshooting Intrinsic Reaction Coordinate (<code>IRC</code>) calculations","text":"<p>Here are some troubleshooting tips for performing IRC calculations</p> <p>No troubleshooting issues have been found yet. </p> <p>Info</p> <p>If you have any issues about this step, raise a <code>New issue</code> at the Issues section by clicking here.</p>"},{"location":"Step_4_Validate_TS/Step_4B_Local_Optimisation.html","title":"Step 4B: Check the Forwards and Backwards Molecules Converge using the <code>TightOPT</code> or <code>NormalOPT</code> tags","text":"<p>Tip</p> <p>Download the template folder for this step by clicking the button below and work on the files in the template folder as you read through this tutorial. </p> <p>Download Templates.zip </p> <p>In Step 4A we have found the local well that mechanistially connect thought to each other with our transition state using the <code>TolMAXG</code> and <code>TolRMSG</code> tags equivalent to the <code>LooseOPT</code> tag. However, it is best to make sure that our forwards and backwards steps converge using the <code>TightOPT</code> or <code>NormalOPT</code> tags, and perform a vibrational frequency calculation to confirm our molecules have fallen into a local energy well. </p> <ul> <li>We will then compare this with our reactant and product molecules from Step 1 to make sure that this mechanistic step is in fact the mechanistic step we are wanting to get the transition state for. </li> </ul> <p>To do this, we will repeat Step 1 for our forwards and backwards molecules. To do this, make a <code>Forwards</code> folder and a <code>Backwards</code> folder, and add to each folder the <code>.inp</code> file for performing local optimisations. Make sure you include the following into your <code>.inp</code> files for both the forwards and backwards input files:</p> <pre><code>!OPT FREQ TightOPT TightSCF defgrid2\n</code></pre> <p>Here, we perform a geometry optimization to optimize the system. The tags here indicate you want to do the following: </p> <ul> <li><code>OPT</code>: Indicates you want ORCA to perform a local optimisation. </li> <li><code>FREQ</code>: Indicates you want ORCA to calculation the vibrational frequency for your molecule. This is used to verify that your optimised structure is indeed a local minimum. This will also give you the Gibbs free energy for your molecule that you (may) want to report as your energy. </li> <li><code>TightOPT</code>: Tells ORCA to tighten the convergence criteria for each geometric step. See ORCA 6.1.0 Manual, page 618 for more info.</li> <li><code>TightSCF</code>: Tells ORCA to tighten the convergence criteria for each electronic step. </li> <li><code>defgrid2</code>: Indicates how fine we want the intergration grid to be (This is the default)</li> </ul> <p>Also include the <code>xyz</code> files of your forwards (<code>orca_IRC_F.xyz</code>) and backwards (<code>orca_IRC_B.xyz</code>) molecules from Step 4A in your <code>Forwards</code> and <code>Backwards</code> folders, respectively.</p> <p>An example of the complete <code>orca.inp</code> file for a local optimisation ORCA job is given below (also located here): </p> Example of a ORCA input file for the local optimisation calculation upon the forwards step<pre><code>!B3LYP DEF2-TZVP D3BJ \n!OPT FREQ TightOPT TightSCF defgrid2\n%SCF\n    MaxIter 2000       # Here setting MaxIter to a very high number. Intended for systems that require sometimes 1000 iterations before converging (very rare).\n    DIISMaxEq 5        # Default value is 5. A value of 15-40 necessary for difficult systems.\n    directresetfreq 15 # Default value is 15. A value of 1 (very expensive) is sometimes required. A value between 1 and 15 may be more cost-effective.\nEND\n%CPCM EPSILON 6.02 REFRAC 1.3723 END\n%PAL NPROCS 32 END\n%maxcore 2000 # This indicates you want ORCA to use only 2GB per core maximum, so ORCA will use only 2GB*32=64GB of memory in total.\n* xyzfile 1 1 orca_IRC_F.xyz\n</code></pre>"},{"location":"Step_4_Validate_TS/Step_4B_Local_Optimisation.html#outputs-from-orca","title":"Outputs from ORCA","text":"<p>When ORCA is running, it will output several files, including an <code>output.out</code> file, an <code>orca.xyz</code> file, and an <code>orca_trj.xyz</code> file.</p> <ul> <li><code>output.out</code>: This file contains the details about how ORCA ran. This includes the vibrational frequency data to check if the locally optimised structure is in fact a local minimum.</li> <li><code>orca.xyz</code>: This is the locally optimised molecule. This is the file that is called <code>reactant_opt.xyz</code> from here on out. </li> <li><code>orca_trj.xyz</code>: This file shows how ORCA locally optimised the molecule. Type <code>viewORCA opt</code> into the terminal to view how the molecule was optimised, including an energy profile. </li> </ul> <p>Once ORCA has finished, you should do the following checks. These are the same checks as we performed in Step 1 (show is an example for the <code>Forwards</code> step, also repeat this process on the <code>Backwards</code> step): </p>"},{"location":"Step_4_Validate_TS/Step_4B_Local_Optimisation.html#check-1-look-at-your-molecule-and-the-energy-profile-and-make-sure-it-looks-ok","title":"Check 1: Look at your molecule and the energy profile and make sure it looks ok","text":"<p>The first thing to do is to look at your molecule and check if it looks sensible with your chemical intuition. You can do this by opening up the <code>orca.xyz</code> in your favourite GUI. I like to use atomic simulation environment (ASE). To look at the molecule and its energy profile:</p> <ol> <li>Open a new terminal</li> <li><code>cd</code> into the optimisation folder</li> <li>Type <code>viewORCA opt</code> into the terminal</li> </ol> <pre><code># cd into your optimisation folder\ncd ORCA_Mechanism_Procedure/Examples/Step4_Validate_TS/Step4B_Validate_Forwards_and_Backwards/Forwards\n\n# View the optimisation \nviewORCA opt\n</code></pre> <p>NOTE 1</p> <p>If <code>viewORCA opt</code> does not work, type <code>ase gui orca_trj.xyz</code> into the terminal instead of <code>viewORCA opt</code>. </p> <p>NOTE 2</p> <p><code>viewORCA opt</code> will also create a xyz file called <code>OPT_images.xyz</code> that you can copy and view on your own computer. </p> <ul> <li>If you just want to create the <code>OPT_images.xyz</code> file, type into the terminal <code>viewORCA opt --view False</code> (which will create the <code>OPT_images.xyz</code> file without showing the <code>ase gui</code> window). </li> </ul> <p>Here, you want to check that this molecule looks like either the product or reactant. In this example, we can see that this molecule is equivalent to the product, where the Cu atom has inserted itself into the C-H bond: </p> Image of the optimisation calculation upon the forward state <p><code>viewORCA opt</code> will also show you the energy profile for this optimisation. </p> Energy Profile of the optimisation calculation upon the forward state"},{"location":"Step_4_Validate_TS/Step_4B_Local_Optimisation.html#check-2-did-the-geometry-optimisation-converge-successfully","title":"Check 2: Did the geometry optimisation converge successfully","text":"<p>You want to look for a table in the ORCA <code>output.out</code> file for a table with the title <code>Geometry convergence</code>. There will be many of these tables, as one is given for each geometric step performed. You want to look at the last <code>Geometry convergence</code> table as this will give the detailed for the latest geometrically optimised step. An example for the <code>Forwards</code> is given below:</p> <pre><code>                                .--------------------.\n          ----------------------|Geometry convergence|-------------------------\n          Item                value                   Tolerance       Converged\n          ---------------------------------------------------------------------\n          Energy change       0.0000004576            0.0000010000      YES\n          RMS gradient        0.0000125618            0.0000300000      YES\n          MAX gradient        0.0000744173            0.0001000000      YES\n          RMS step            0.0002245851            0.0006000000      YES\n          MAX step            0.0007713970            0.0010000000      YES\n          -------------------------------------------------------------------------\n          ........................................................\n          Max(Bonds)      0.0003      Max(Angles)    0.03\n          Max(Dihed)        0.04      Max(Improp)    0.00\n          ---------------------------------------------------------------------\n\n                    ***********************HURRAY********************\n                    ***        THE OPTIMIZATION HAS CONVERGED     ***\n                    *************************************************\n</code></pre> <p>In this example, you can see that the majority of the items of interest have converged, and ORCA has happy that the convergence criteria have been met. ORCA also tells you this by giving you a <code>HURRAY</code> message as well as a <code>THE OPTIMIZATION HAS CONVERGED</code> message (as you can see in above). </p>"},{"location":"Step_4_Validate_TS/Step_4B_Local_Optimisation.html#check-3-does-the-molecule-have-any-non-negative-vibrational-frequencies","title":"Check 3: Does the molecule have any non-negative vibrational frequencies","text":"<p>After performing a local optimization, it is important that you look at the vibrational frequencies that were calculated in the ORCA output file. These are the frequencies that you could see in an IR or Raman spectra. You want to look through your <code>.out</code> file for a heading called <code>VIBRATIONAL FREQUENCIES</code>. We want to make sure that all the frequencies are non-negative. This means we are in a local energy well. If one or more frequency is negative, this means we are not in a local minimum. In this case, you need to tighten the optimization, or need to look at your molecule and see if any part of it structurally does not make sense with your chemical intuition. </p> <p>In the example below (for <code>Forwards</code>), you can see that there are no non-negative frequencies from the <code>FREQ</code> calculation, therefore we are in a local energy well: </p> <pre><code>-----------------------\nVIBRATIONAL FREQUENCIES\n-----------------------\n\nScaling factor for frequencies =  1.000000000  (already applied!)\n\n     0:       0.00 cm**-1\n     1:       0.00 cm**-1\n     2:       0.00 cm**-1\n     3:       0.00 cm**-1\n     4:       0.00 cm**-1\n     5:       0.00 cm**-1\n     6:      46.05 cm**-1\n     7:      70.06 cm**-1\n     8:     146.05 cm**-1\n     9:     225.14 cm**-1\n    10:     281.70 cm**-1\n    11:     305.43 cm**-1\n    12:     391.89 cm**-1\n    13:     402.99 cm**-1\n    14:     415.38 cm**-1\n    15:     472.44 cm**-1\n    16:     496.67 cm**-1\n    17:     584.22 cm**-1\n    18:     628.51 cm**-1\n    19:     679.99 cm**-1\n    20:     721.45 cm**-1\n    21:     784.71 cm**-1\n    22:     794.19 cm**-1\n    23:     809.89 cm**-1\n    24:     845.55 cm**-1\n    25:     954.05 cm**-1\n    26:     980.23 cm**-1\n    27:     997.24 cm**-1\n    28:    1018.49 cm**-1\n    29:    1030.82 cm**-1\n    30:    1046.51 cm**-1\n    31:    1103.69 cm**-1\n    32:    1138.20 cm**-1\n    33:    1187.91 cm**-1\n    34:    1210.53 cm**-1\n    35:    1238.59 cm**-1\n    36:    1312.08 cm**-1\n    37:    1358.82 cm**-1\n    38:    1377.79 cm**-1\n    39:    1481.33 cm**-1\n    40:    1515.59 cm**-1\n    41:    1542.97 cm**-1\n    42:    1608.75 cm**-1\n    43:    1632.94 cm**-1\n    44:    1646.78 cm**-1\n    45:    1845.36 cm**-1\n    46:    3185.00 cm**-1\n    47:    3187.95 cm**-1\n    48:    3191.67 cm**-1\n    49:    3193.66 cm**-1\n    50:    3204.18 cm**-1\n    51:    3209.66 cm**-1\n    52:    3488.03 cm**-1\n    53:    3586.23 cm**-1\n</code></pre>"},{"location":"Step_4_Validate_TS/Step_4B_Local_Optimisation.html#example-of-an-issue-with-step-4-in-this-case-but-all-is-well","title":"Example of an issue with Step 4 in this case, but all is well.","text":"<p>In this example, the optimised reactant from Step 1 looks like this:</p> Optimised reactant <p>However, we get the following for the backwards structure from step 4A.</p> Backwards structure <p>This is fine because the IRC is set by default with loose convergence criteria. These are the best settings for 4A, otherwise it takes forever to complete the IRC process. This is the reason for step 4B, we then tighten the converged with a regular geometric optimisation. By doing this, we get the following for the tightly converged backwards step.</p> Compare optimisations <p>We see that the tightly converged backwards structure from 4B gives a similar structure to the converged reactant from step 1, so this is great.</p> <p>One problem however is that the backwards structure from Step 4B did not converge. However, as we have mentioned this structure is very similar to the optimised reactant structure in step 1. </p> <ul> <li>We could retry this calculation from the last geometric step from step 4B, as it is common that ORCA will fail for various reason and restarting ORCA sorts everything out</li> <li>However, because the backwards structure we got from step 4B is pretty much the same as the optimised reactant from step 1, I would be pragmatic and be happy that step 4B backwards gave us the result we were looking for. </li> </ul>"},{"location":"Step_4_Validate_TS/Step_4B_Local_Optimisation.html#troubleshooting-the-geometric-optimisation-opt-calculation","title":"Troubleshooting the geometric optimisation (<code>Opt</code>) calculation","text":"<p>See the Troubleshooting Geometric Optimisation Calculations page for troubleshooting tips for geoemtric optimisations.</p>"}]}